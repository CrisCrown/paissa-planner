<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pa√Øssa d'en Bernat ‚Äî Your Wedding</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:Georgia,'Times New Roman',serif;color:#3a3226;background:#faf8f5}
header{background:linear-gradient(135deg,#c7b799,#b8a88a);padding:30px 20px;text-align:center}
header h1{font-size:22px;font-weight:400;color:#fff;letter-spacing:1px}
header .names{font-size:18px;color:#fff;margin-top:8px;font-weight:600}
header .date{font-size:13px;color:rgba(255,255,255,.8);margin-top:4px;font-style:italic}
.wrap{max-width:700px;margin:0 auto;padding:0 16px 60px}
.tabs{display:flex;overflow-x:auto;gap:4px;padding:12px 0;border-bottom:2px solid #e8dfc8;margin-bottom:16px;-webkit-overflow-scrolling:touch}
.tab{padding:8px 12px;border-radius:20px;font-size:11px;cursor:pointer;white-space:nowrap;border:1px solid #e8dfc8;background:#fff;color:#8a7e6a;font-family:inherit}
.tab.on{background:#3a3226;color:#faf8f5;border-color:#3a3226}
.tab.sec{border-left:3px solid #d4c5a9;margin-left:8px}
h2.sec{font-size:20px;font-weight:400;margin-top:20px;margin-bottom:6px;border-bottom:2px solid #d4c5a9;padding-bottom:8px}
.sub{font-size:13px;color:#8a7e6a;margin-bottom:14px;font-style:italic}
.lbl{display:block;font-size:13px;font-weight:600;color:#5a4e3a;margin:12px 0 4px}
input,textarea,select{width:100%;padding:10px;border:1px solid #ddd5c4;border-radius:6px;font-size:14px;font-family:inherit;background:#fff}
input[type=number]{width:80px}
textarea{min-height:60px;resize:vertical}
.row{display:flex;gap:12px;flex-wrap:wrap}.half{flex:1 1 45%;min-width:170px}
.warm{background:#f5f0e8;border:1px solid #e8dfc8;border-radius:10px;padding:14px;margin:14px 0;font-size:13px;line-height:1.6;color:#5a4e3a}
.incl{background:#e8f5e9;border:1px solid #c8e6c9;border-radius:8px;padding:10px 14px;font-size:12px;color:#2e7d32;margin:10px 0;line-height:1.5}
.warn{background:#fff3cd;border:1px solid #ffeaa7;border-radius:8px;padding:10px 14px;font-size:12px;color:#856404;margin:10px 0}
.ck{display:flex;align-items:flex-start;gap:8px;padding:8px 0;border-bottom:1px solid #f0ece4;cursor:pointer}
.ck:hover{background:#faf6ef}
.sb{display:flex;justify-content:space-between}
h3.ms{font-size:15px;font-weight:600;margin-top:18px;margin-bottom:4px}
.nt{font-size:11px;color:#a89e8a;font-style:italic;margin-top:2px}
.cnt{display:inline-flex;align-items:center;gap:8px}
.cnt button{width:28px;height:28px;border-radius:50%;border:1px solid #ddd5c4;background:#fff;cursor:pointer;font-size:15px}
.cnt span{font-size:15px;font-weight:500;min-width:26px;text-align:center}
.sum{background:#3a3226;color:#faf8f5;border-radius:12px;padding:20px;margin:20px 0}
.sum .ti{font-size:16px;color:#d4c5a9;margin-bottom:10px;font-weight:600}
.sum .r{display:flex;justify-content:space-between;padding:5px 0;border-bottom:1px solid rgba(255,255,255,.06);font-size:13px}
.sum .tot{display:flex;justify-content:space-between;padding:10px 0;font-size:17px;border-top:2px solid #d4c5a9;margin-top:10px;font-weight:600}
.room{background:#fff;border:1px solid #e8dfc8;border-radius:10px;padding:14px;margin:10px 0}
.room-title{font-size:14px;font-weight:600;color:#b8a88a;margin-bottom:6px}
.room-type{font-size:11px;color:#8a7e6a;margin-bottom:8px}
.tl-item{display:flex;gap:12px;padding:10px 0;border-bottom:1px solid #f0ece4}
.tl-time{font-size:14px;font-weight:600;color:#b8a88a;min-width:80px}
.tl-what{font-size:13px}.tl-dur{font-size:11px;color:#a89e8a;font-style:italic}
.chips{display:flex;flex-wrap:wrap;gap:3px;margin-top:4px}
.ch{display:inline-block;padding:5px 10px;border-radius:14px;font-size:11px;cursor:pointer;border:1px solid #ddd5c4;background:#fff;color:#8a7e6a;transition:.1s}
.ch.on{border:2px solid #b8a88a;background:#f5f0e8;color:#3a3226}
.ch.pr{border-style:dashed}.ch.pr.on{border-style:solid;border-color:#c9a44c}
.prep-slot{background:#fff;border:1px solid #e8dfc8;border-radius:8px;padding:10px;margin:6px 0}
.cd{border:1px solid #e8dfc8;border-radius:10px;padding:12px;margin-bottom:8px;cursor:pointer;background:#fff;transition:.15s}
.cd:hover{border-color:#d4c5a9}.cd.on{border:2px solid #b8a88a;background:#faf6ef}
.pop{display:inline-block;background:#b8a88a;color:#fff;font-size:9px;padding:2px 6px;border-radius:8px;margin-left:6px;vertical-align:middle;letter-spacing:.5px;text-transform:uppercase}
.prem{display:inline-block;background:#c9a44c;color:#fff;font-size:9px;padding:2px 6px;border-radius:8px;margin-left:6px;vertical-align:middle}
.tl-ext{background:#fff;border:1px dashed #d4c5a9;border-radius:8px;padding:10px;margin:6px 0;font-size:12px;cursor:pointer}
.tl-ext.on{background:#faf6ef;border-style:solid;border-color:#b8a88a}
.wknd{background:#fff;border:1px solid #e8dfc8;border-radius:12px;padding:16px;margin:16px 0}
.wknd-row{display:flex;gap:10px;padding:8px 0;border-bottom:1px solid #f0ece4;align-items:center}
.wknd-day{font-size:12px;font-weight:600;color:#b8a88a;min-width:70px}
.wknd-what{font-size:13px}
.msel{background:#fff;border:1px solid #e8dfc8;border-radius:10px;padding:16px;margin:16px 0;font-size:13px;line-height:1.6}
.section-divider{text-align:center;padding:12px 0;margin:8px 0;font-size:11px;color:#b8a88a;letter-spacing:2px;text-transform:uppercase;border-top:2px solid #e8dfc8}
.section-divider{text-align:center;padding:12px 0;margin:8px 0;font-size:11px;color:#b8a88a;letter-spacing:2px;text-transform:uppercase;border-top:2px solid #e8dfc8}
.pay-row{display:flex;gap:8px;align-items:center;padding:8px 0;border-bottom:1px solid #f0ece4;flex-wrap:wrap}
.pay-row input{width:auto;flex:1;min-width:80px}
.pay-row input[type=number]{width:100px;flex:none}
.pay-row input[type=date]{width:140px;flex:none}
.disc-box{background:#fff8e1;border:1px solid #ffe082;border-radius:10px;padding:14px;margin:14px 0}
/* Table Planner */
.fp-container{position:relative;width:100%;max-width:600px;margin:0 auto;touch-action:none}
.fp-bg{width:100%;display:block;border-radius:12px;border:1px solid #e8dfc8}
.fp-table{position:absolute;cursor:grab;user-select:none;touch-action:none;display:flex;align-items:center;justify-content:center;border-radius:50%;background:rgba(255,255,255,.85);border:2px solid #b8a88a;font-size:7px;font-weight:700;color:#5a4e3a;box-shadow:0 2px 8px rgba(0,0,0,.15);transition:box-shadow .2s}
.fp-table.dragging{box-shadow:0 4px 16px rgba(0,0,0,.3);z-index:100;cursor:grabbing}
.fp-table.rect{border-radius:6px}
.fp-table .seats{position:absolute;bottom:-9px;font-size:7px;color:#8a7e6a;white-space:nowrap}
.fp-table.warning{border-color:#dc3545;background:rgba(255,200,200,.85)}
.fp-toolbar{display:flex;gap:8px;margin:10px 0;flex-wrap:wrap;justify-content:center}
.fp-btn{padding:6px 14px;border:1px solid #e8dfc8;border-radius:20px;background:#fff;font-size:12px;cursor:pointer;font-family:Georgia,serif;color:#5a4e3a;transition:.2s}
.fp-btn:hover,.fp-btn.on{background:#b8a88a;color:#fff;border-color:#b8a88a}
.fp-btn.danger{color:#dc3545;border-color:#dc3545}
.fp-btn.danger:hover{background:#dc3545;color:#fff}
.fp-info{text-align:center;font-size:11px;color:#8a7e6a;margin:6px 0}
.fp-wrapper{overflow:hidden;border-radius:12px;border:1px solid #e8dfc8;position:relative}
.fp-zoom{display:flex;gap:6px;justify-content:center;margin:8px 0}
.fp-zoom button{width:32px;height:32px;border-radius:50%;border:1px solid #e8dfc8;background:#fff;font-size:18px;cursor:pointer;font-family:Georgia,serif;color:#5a4e3a;display:flex;align-items:center;justify-content:center}
.fp-zoom button:hover{background:#b8a88a;color:#fff}
.fp-zoom span{font-size:11px;color:#8a7e6a;display:flex;align-items:center}
.gl-add{display:flex;gap:6px;margin-bottom:12px;flex-wrap:wrap}
.gl-add input,.gl-add select{padding:8px;border:1px solid #e8dfc8;border-radius:8px;font-family:Georgia,serif;font-size:13px;flex:1;min-width:100px}
.gl-add select{flex:0;min-width:60px}
.gl-add button{padding:8px 16px;background:#b8a88a;color:#fff;border:none;border-radius:8px;font-family:Georgia,serif;cursor:pointer;font-size:13px}
.guest-card{background:#fff;border:1px solid #e8dfc8;border-radius:10px;padding:10px 12px;margin-bottom:6px;display:flex;align-items:center;justify-content:space-between;gap:8px}
.guest-card .g-name{font-weight:600;font-size:14px;flex:1}
.guest-card .g-info{font-size:11px;color:#8a7e6a}
.guest-card .del{cursor:pointer;color:#ccc;font-size:18px;padding:0 4px}
.guest-card .del:hover{color:#dc3545}
.tp-summary-table{width:100%;border-collapse:collapse;font-size:12px;margin:10px 0}
.tp-summary-table th{background:#5a4e3a;color:#fff;padding:8px;text-align:left;font-weight:400}
.tp-summary-table td{padding:6px 8px;border-bottom:1px solid #e8dfc8}
.tp-summary-table tr:nth-child(even){background:#f8f5f0}
.tp-export-btn{display:block;margin:16px auto;padding:10px 24px;background:#5a4e3a;color:#fff;border:none;border-radius:20px;font-family:Georgia,serif;font-size:14px;cursor:pointer}
.tp-export-btn:hover{background:#b8a88a}
.seat-popup{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.5);z-index:200;display:flex;align-items:center;justify-content:center}
.seat-card{background:#faf8f5;border-radius:16px;padding:16px;width:90%;max-width:360px;max-height:80vh;overflow-y:auto}
.seat-card h3{font-size:16px;color:#5a4e3a;margin-bottom:4px}
.seat-card .close{float:right;font-size:20px;cursor:pointer;color:#8a7e6a;padding:0 4px}
.seat-card .close:hover{color:#dc3545}
.seat-row{display:flex;align-items:center;gap:8px;padding:6px 0;border-bottom:1px solid #e8dfc8}
.seat-num{width:22px;height:22px;border-radius:50%;background:#b8a88a;color:#fff;display:flex;align-items:center;justify-content:center;font-size:10px;font-weight:600;flex-shrink:0}
.seat-row select{flex:1;padding:6px;border:1px solid #e8dfc8;border-radius:6px;font-size:12px;font-family:Georgia,serif}
.count-bar{display:flex;justify-content:space-between;background:#fff;border:1px solid #e8dfc8;border-radius:10px;padding:10px 14px;margin:8px 0}
.count-bar div{text-align:center}
.count-bar .c-num{font-size:20px;font-weight:600;color:#b8a88a}
.count-bar .c-lbl{font-size:10px;color:#8a7e6a}
.tp-subtab{display:flex;border-bottom:2px solid #e8dfc8;margin-bottom:12px}
.tp-subtab div{flex:1;text-align:center;padding:10px 4px;font-size:12px;cursor:pointer;color:#8a7e6a;border-bottom:2px solid transparent;margin-bottom:-2px;transition:.2s}
.tp-subtab div.on{color:#5a4e3a;border-bottom-color:#b8a88a;font-weight:600}
</style>
</head>
<body>
<header>
<h1>Pa√Øssa d'en Bernat</h1>
<div class="names" id="hN"></div>
<div class="date" id="hD"></div>
</header>
<div id="saveStatus" style="position:fixed;bottom:20px;right:20px;background:#4caf50;color:#fff;padding:8px 16px;border-radius:20px;font-size:12px;font-family:Georgia,serif;opacity:0;transition:opacity 0.3s;z-index:999;pointer-events:none">Saved</div>
<div class="wrap"><div class="tabs" id="tabs"></div><div id="app"></div></div>
<script>
// ===== TABS =====
const ALL_TABS=["Overview & Timeline","Venue & Stay","Catering","Venue Extras","Table Planner","Budget","Checklist"];
let tab=0;

// ===== ALL DATA =====
const DEFAULTS={
// --- From Proposal ---
p1:"",p2:"",em:"",ph:"",dt:"",address:"",plannerName:"",plannerEmail:"",weddingID:"",
adults:0,kids:0,babies:0,proposalAdults:0,proposalKids:0,proposalBabies:0,
hireType:"accom",dhDate:"",accomPeriod:"",extraNights:0,extraNightRequested:false,extraNightApproved:false,
secondEvent:false,secondEventGuests:40,secondEventFood:"",secondEventDrinks:"",sunsetVerified:false,sunsetNotes:"",shoppingStore:"",venueNotesAdmin:"",refundName:"",refundIBAN:"",refundBIC:"",refundBank:"",refundCurrency:"",passport1:"",
cave:[],extArr:false,extRec:false,noSpeeches:false,
menu:"",
canapes:[],starters:[],mainS:[],mainF:[],mainV:[],sides:[],dessert:"",paellas:[],salads:[],
kidsM:"",dietNotes:"",
arr:"",rec:"",recExt:false,bar:"",extraH:0,
sunset:false,shots:false,
brunchWed:false,brunchWedPax:5,brunchAfter:false,brunchAfterPax:8,
snacks:false,snackType:"",cake:false,cakeNotes:"",marketTable:false,marketTableNotes:"",
// --- Planner additions ---
checkIn:"",checkOut:"",
gateCode:"",
stayAdults:0,stayChildren:0,stayChildAges:"",cotsNeeded:0,kidBedsNeeded:0,
room1:"",room2:"",room3:"",room4:"",room5:"",roomNotes:"",
brideContact1:"",brideContact2:"",bridePeople:"",
groomLocation:"",groomContact1:"",groomContact2:"",groomPeople:"",
wantShopping:false,shoppingList:"",breakfastOption:"",shoppingExtra:0,
morningNeeds:"",brideRoomPrepTime:"",
// Tasting
tastingType:"",tastingDate:"",tastingAttend:false,tastingName1:"",tastingName2:"",tastingAllergies:"",
// Confirmed menu (from tasting day)
confCanapes:[],confStarters:[],confMainS:[],confMainF:[],confMainV:[],confSides:[],confDessert:"",confPaellas:[],confSalads:[],
chefNotesCanapes:"",chefNotesStarters:"",chefNotesMain:"",chefNotesDessert:"",
// Confirmed drinks
confArrivalNotes:"",confReceptionNotes:"",confDinnerWineNotes:"",confBarNotes:"",confCaveBarNotes:"",
barNotes:"",catererNotes:"",venueNotes:"",
colorTheme:"",styleNotes:"",
// Lighting & Sound
uplights:false,festoons:false,discoBalls:false,fairyCurtains:false,sound:false,
// Setup & Furniture
seatsPerTable:8,useRectTable:false,
chairSwap:"",roundCloths:0,napkins:false,highChairs:0,
cerChairType:"",cerChairs:0,cerBenches:0,
brideGroomChairs:false,bgChairType:"",
furnitureNotes:"",
// Services
tableStyling:false,ceremonyStyle:false,nightPack:false,parkingAtt:false,
lateCoord:false,lateCoordExtra:0,caveSecurity:false,caveSecurityExtra:0,
gardenStyle:false,gardenSmallPots:0,gardenMedPots:0,gardenXLPots:0,gardenPlantNotes:"",
// Checklist
cl_menu:false,cl_drinks:false,cl_dietary:false,cl_tasting:false,cl_cake:false,
cl_guestCount:false,cl_rooms:false,cl_tableplan:false,cl_floorplan:false,cl_timeline:false,
cl_ceremony:false,cl_license:false,cl_speeches:false,cl_suppliers:false,
cl_transport:false,cl_music:false,cl_florist:false,cl_furniture:false,cl_services:false,cl_payments:false
,
venuePayments:[],
cateringPayments:[],
venueDiscountPct:10,venueDiscountOverride:false,venueDiscountCustom:0,
cateringDiscountPct:0,cateringDiscountOverride:false,cateringDiscountCustom:0,
refundIBAN:"",refundBIC:"",refundName:"",
// Table Planner
tpTables:[],tpGuests:[],tpNextTableId:1
};
let D = {};


// ===== PRICING DATA =====
const DH27=[{d:"Tue 18 May 2027",p:6500},{d:"Wed 19 May 2027",p:7000},{d:"Thu 20 May 2027",p:7500},{d:"Tue 25 May 2027",p:6500},{d:"Wed 26 May 2027",p:7000},{d:"Thu 27 May 2027",p:7500},{d:"Fri 28 May 2027",p:8000},{d:"Sat 29 May 2027",p:9500,pr:1},{d:"Tue 8 Jun 2027",p:6500},{d:"Wed 9 Jun 2027",p:7000},{d:"Sun 27 Jun 2027",p:8500},{d:"Mon 28 Jun 2027",p:6500},{d:"Tue 29 Jun 2027",p:6500},{d:"Thu 1 Jul 2027",p:7500},{d:"Fri 2 Jul 2027",p:8000},{d:"Sat 3 Jul 2027",p:9000},{d:"Tue 24 Aug 2027",p:6500},{d:"Wed 25 Aug 2027",p:7000},{d:"Thu 26 Aug 2027",p:7500},{d:"Fri 27 Aug 2027",p:8000},{d:"Sat 28 Aug 2027",p:9000},{d:"Sun 29 Aug 2027",p:8500},{d:"Mon 30 Aug 2027",p:6500},{d:"Tue 31 Aug 2027",p:6500},{d:"Wed 1 Sep 2027",p:7000},{d:"Thu 2 Sep 2027",p:7500},{d:"Fri 3 Sep 2027",p:8000},{d:"Sat 4 Sep 2027",p:9000},{d:"Sun 5 Sep 2027",p:8500},{d:"Mon 6 Sep 2027",p:6500},{d:"Tue 7 Sep 2027",p:6500}];
const DH28=[{d:"Wed 24 May 2028",p:7500},{d:"Thu 25 May 2028",p:8000},{d:"Fri 26 May 2028",p:8500},{d:"Sat 27 May 2028",p:10000,pr:1},{d:"Sun 28 May 2028",p:9000},{d:"Mon 29 May 2028",p:7000},{d:"Tue 30 May 2028",p:7000},{d:"Wed 31 May 2028",p:7500},{d:"Thu 1 Jun 2028",p:8000},{d:"Fri 2 Jun 2028",p:8500},{d:"Sat 3 Jun 2028",p:10000,pr:1},{d:"Sun 4 Jun 2028",p:9000},{d:"Mon 5 Jun 2028",p:7000},{d:"Tue 6 Jun 2028",p:7000},{d:"Wed 7 Jun 2028",p:7500},{d:"Wed 23 Aug 2028",p:7500},{d:"Thu 24 Aug 2028",p:8000},{d:"Fri 25 Aug 2028",p:8500},{d:"Sat 26 Aug 2028",p:9500},{d:"Sun 27 Aug 2028",p:9000},{d:"Mon 28 Aug 2028",p:7000},{d:"Tue 29 Aug 2028",p:7000},{d:"Wed 30 Aug 2028",p:7500},{d:"Thu 31 Aug 2028",p:8000},{d:"Fri 1 Sep 2028",p:8500},{d:"Sat 2 Sep 2028",p:9500},{d:"Sun 3 Sep 2028",p:9000},{d:"Mon 4 Sep 2028",p:7000},{d:"Tue 5 Sep 2028",p:7000},{d:"Wed 6 Sep 2028",p:7500},{d:"Thu 7 Sep 2028",p:8000}];
const AC=[[" 1-20 Apr",13000,1300],["21-30 Apr",13500,1500],["1-15 May",14000,1700],["16-31 May",14700,1600],["1-15 Jun",15400,1700],["16-30 Jun",16000,1800],["1-15 Jul",17000,1900],["16 Jul-24 Aug",18000,1700],["25-31 Aug",17000,1700],["1-15 Sep",16000,1700],["16-30 Sep",15000,1500],["1-15 Oct",14400,1400]];
const CV=[["midnight‚Äì1am",1000],["1am‚Äì2am",1000],["2am‚Äì3am",850],["3am‚Äì4am",750]];
const TL={
apr:{arr:"3:00 PM",cer:"3:30 PM",rec:"4:00 PM",din:"5:30 PM",sp:"7:15 PM",sun:"7:45 PM",lbl:"April",pe:"12:00 AM",sunBefore:30},
may:{arr:"3:30 PM",cer:"4:00 PM",rec:"4:30 PM",din:"6:00 PM",sp:"8:00 PM",sun:"8:30 PM",lbl:"May",pe:"12:00 AM",sunBefore:30},
jun:{arr:"3:30 PM",cer:"4:00 PM",rec:"4:30 PM",din:"6:00 PM",sp:"8:00 PM",sun:"8:30 PM",lbl:"June/July",pe:"12:00 AM",sunBefore:30},
jul:{arr:"3:30 PM",cer:"4:00 PM",rec:"4:30 PM",din:"6:00 PM",sp:"8:00 PM",sun:"8:30 PM",lbl:"July",pe:"12:00 AM",sunBefore:30},
aug:{arr:"3:00 PM",cer:"3:30 PM",rec:"4:00 PM",din:"5:30 PM",sp:"7:30 PM",sun:"8:00 PM",lbl:"August",pe:"12:00 AM",sunBefore:40},
sep:{arr:"2:30 PM",cer:"3:00 PM",rec:"3:30 PM",din:"5:00 PM",sp:"7:10 PM",sun:"7:40 PM",lbl:"September",pe:"12:00 AM",sunBefore:40},
oct:{arr:"2:00 PM",cer:"2:30 PM",rec:"3:00 PM",din:"4:30 PM",sp:"6:30 PM",sun:"7:00 PM",lbl:"October",pe:"12:00 AM",sunBefore:40}
};
const SUNSETS={apr:"7:55 PM",may:"8:35 PM",jun:"9:15 PM",jul:"9:20 PM",aug:"8:50 PM",sep:"7:55 PM",oct:"7:10 PM"};
// Exact sunset times per Saturday for Ibiza (approximate, based on astronomical data)
const SAT_SUNSETS_27={"Sat 3 Apr 2027":"7:40 PM","Sat 10 Apr 2027":"7:48 PM","Sat 17 Apr 2027":"7:55 PM","Sat 24 Apr 2027":"8:03 PM","Sat 1 May 2027":"8:10 PM","Sat 8 May 2027":"8:18 PM","Sat 15 May 2027":"8:25 PM","Sat 22 May 2027":"8:31 PM","Sat 29 May 2027":"8:37 PM","Sat 5 Jun 2027":"8:42 PM","Sat 12 Jun 2027":"8:46 PM","Sat 19 Jun 2027":"8:48 PM","Sat 26 Jun 2027":"8:48 PM","Sat 3 Jul 2027":"8:47 PM","Sat 10 Jul 2027":"8:44 PM","Sat 17 Jul 2027":"8:39 PM","Sat 24 Jul 2027":"8:33 PM","Sat 31 Jul 2027":"8:25 PM","Sat 7 Aug 2027":"8:16 PM","Sat 14 Aug 2027":"8:06 PM","Sat 21 Aug 2027":"7:55 PM","Sat 28 Aug 2027":"7:44 PM","Sat 4 Sep 2027":"7:32 PM","Sat 11 Sep 2027":"7:20 PM","Sat 18 Sep 2027":"7:07 PM","Sat 25 Sep 2027":"6:55 PM","Sat 2 Oct 2027":"6:42 PM","Sat 9 Oct 2027":"6:31 PM","Sat 16 Oct 2027":"6:20 PM"};
const SAT_SUNSETS_28={"Sat 1 Apr 2028":"7:38 PM","Sat 8 Apr 2028":"7:46 PM","Sat 15 Apr 2028":"7:53 PM","Sat 22 Apr 2028":"8:01 PM","Sat 29 Apr 2028":"8:08 PM","Sat 6 May 2028":"8:16 PM","Sat 13 May 2028":"8:23 PM","Sat 20 May 2028":"8:29 PM","Sat 27 May 2028":"8:35 PM","Sat 3 Jun 2028":"8:40 PM","Sat 10 Jun 2028":"8:44 PM","Sat 17 Jun 2028":"8:47 PM","Sat 24 Jun 2028":"8:48 PM","Sat 1 Jul 2028":"8:47 PM","Sat 8 Jul 2028":"8:44 PM","Sat 15 Jul 2028":"8:40 PM","Sat 22 Jul 2028":"8:34 PM","Sat 29 Jul 2028":"8:26 PM","Sat 5 Aug 2028":"8:17 PM","Sat 12 Aug 2028":"8:07 PM","Sat 19 Aug 2028":"7:57 PM","Sat 26 Aug 2028":"7:45 PM","Sat 2 Sep 2028":"7:33 PM","Sat 9 Sep 2028":"7:21 PM","Sat 16 Sep 2028":"7:08 PM","Sat 23 Sep 2028":"6:56 PM","Sat 30 Sep 2028":"6:43 PM","Sat 7 Oct 2028":"6:32 PM","Sat 14 Oct 2028":"6:21 PM"};

function noteDiv(note,style){return note?'<div class="nt"'+(style?' style="'+style+'"':'')+'>' +note+'</div>':'';}
function getExactSunset(){const d=D.dhDate||D.dt||"";const all={...SAT_SUNSETS_27,...SAT_SUNSETS_28};if(all[d])return all[d];const mo=getM();return mo?SUNSETS[mo]:null;}


// ===== MENU DATA =====
const MN_INFO={is:{n:"Ibicenco ‚Äî Family Style",p:159,r:15,cN:4,sN:3,siN:2,dT:"sharing",d:"Mediterranean sharing feast"},im:{n:"Ibicenco ‚Äî Sharing + Plated Main",p:169,r:10,cN:5,sN:3,siN:0,dT:"sharing",d:"Sharing starters, plated main"},ip:{n:"Ibicenco ‚Äî Fully Plated",p:189,r:10,cN:6,sN:1,siN:0,dT:"plated",d:"Fine dining, each course plated"},sm:{n:"Smoky Zest ‚Äî Live BBQ",p:159,r:15,cN:4,sN:0,siN:3,dT:"smoky",d:"Spectacular live Asado"},sa:{n:"Saffron Zest ‚Äî Paella Feast",p:149,r:15,cN:4,sN:0,siN:0,dT:"saffron",d:"Traditional paella feast"}};
const CS=["Goat Cheese Macarons","Green Gazpacho","Churros Lollipop","Babaganoush Tartlet","Pineapple Skewers","Truffle Crustade","Tortilla Crispwich","Angus Beef Roll","Croquettes","Pata Negra Choux","Chorizo Cannel√®","Tacos","Lamb Cigars","Cocktail Cloud","Prawn Brioche","Black Chip Octopus","Tuna Tartare","Anchovy Spine","Beef Tartare & Caviar","Salmon Yakitori"];
const CP=["Lobster Bon Bon (+‚Ç¨4.50)","Crab Doughnut (+‚Ç¨4.50)","Red Prawn Cones (+‚Ç¨4.50)","Gratin Scallop (+‚Ç¨4.50)"];
const CA=["Orange Gazpacho","Goat Cheese Macarons","Tortilla Crispwich","Croquettes","Churros Lollipop","Mini Salpic√≥n","Chorizo Cannel√®","Pata Negra Choux","Filo Fagottini","Mini Cones"];
const CB=["Green Gazpacho","Churros Lollipop","Pineapple Skewers","Croquettes","Prawn Brioche","Black Chip Octopus","Tacos","Angus Steak Roll","Beef Tartare & Caviar"];
const SS=["Burrata & Grilled Peach","Veggie Tempura","Waffle Falafel","Sea Bass Ceviche","Artichokes & Feta","Beef Tiradito","Vitel Ton√®","Beetroot Salmon","Grilled Prawns"];
const SP=["Tomatoes Tatin","Aubergine & Figs","Asparagus & Burrata","Waffle Falafel","Artichokes & Feta","Ceviche Berries","Red Prawn Carpaccio","Beef Tiradito","Thai Chicken Lab","Vitel Ton√®","Wagyu Sando*","Lobster Salad*"];
const Ms={sea:["Sea Bass Papillote","Sea Bream"],farm:["Herb-Crusted Pica√±a","Beef Tagliata","Iberian Secreto","Za'atar Lamb","Ras el Hanout Chicken"],veg:["Violet Cauliflower","Squash Wellington"]};
const Mp={sea:["Golden Sea Bass","Cod Chorizo Aioli","Monkfish","Rotja Ibicenca","Saffron Dentex*"],farm:["Chicken Sobrasada","Angus Fillet","Thyme Lamb","Suckling Pig","Crispy Beef Lingot","Lamb Pica√±a","Galician Beef*"],veg:["Mushroom Risotto","Cauliflower Steak","Sweet Potato Wellington"]};
const Mb={sea:["Prawns","Sea Bass","Cod","Salmon","Dorada","Tuna","Snapper","Octopus","Squid","Turbot","Scallops*","Lobster*"],farm:["Fillet Steak","Picanha","Entra√±a","Short Ribs","Payes Chicken","Lamb Picanha","Secreto","Butifara","BBQ Ribs","Rack of Lamb*","Rib-eye*"],veg:["Squash & Miso","Halloumi","Cauliflower Steak"]};
const SI=["Tomato Salad","Green Salad","Kale Salad","Tahini Beet","Payes Potatoes","Grilled Veggies"];
const SB=["Payes Potatoes Grill","Watermelon & Feta","Charcoal Veggies"];
const PA=["Mix","Fideua","Sea Food","Vegetarian","Black Paella","Carabineros*","Lobster & Scallops*"];
const SLx=["Tomatoes Medley","Artichokes Salad","Watermelon & Feta","Orange & Fennel"];
const DE={sharing:["Sweet Sunset Station|Brownie bites, cheesecake, fruit tartlets","Sweet Board|Curated desserts on sharing boards"],plated:["Chocolate Garden|A rich chocolate fantasy","Caleta Tiramis√π|Ibiza's own tiramis√π","Exotic Mille Feuille|Layers of tropical flavours"],smoky:["Willy Wonka|Brownie bites, cheesecake, fruit tartlets","Black Pineapple|Charred pineapple with lime mousse"],saffron:["Sweet Sunset Station|Brownie bites, cheesecake, fruit tartlets"]};
const KD=["Dolce Vita (Pasta)","American Dream (Burger)","Farm (Chicken)","Sea (Cod)","Green (Veggie)","Ibiza (Paella)"];
const SX=["Mini Burgers","Pita Shawarma","Tacos","Pizza","Baos"];
const AR=[{i:"a1",n:"Cava Welcome",p:9.5},{i:"a2",n:"Cocktail/Mocktail",p:15}];
const RE=[{i:"r1",n:"Classic (Sangria, Beer, Soft Drinks)",p:25,x:10},{i:"r2",n:"Cocktails (2 Signature Cocktails, Beer)",p:35,x:12}];
const BA=[{i:"b1",n:"Standard Open Bar",p:55,x:13},{i:"b2",n:"Premium Open Bar",p:70,x:20}];

const ROOMS=[
{k:"room1",n:"Room 1 ‚Äî Bridal Room",t:"King double bed (200√ó200) ¬∑ En-suite with shower",note:"Usually the bride's room"},
{k:"room2",n:"Room 2 ‚Äî Twin Room",t:"2 single beds (200√ó90 each) ¬∑ En-suite with shower"},
{k:"room3",n:"Room 3",t:"King double bed (200√ó200) ¬∑ En-suite with bath"},
{k:"room4",n:"Room 4",t:"Queen double bed (180√ó200) ¬∑ En-suite with shower"},
{k:"room5",n:"Room 5 ‚Äî Twin Room",t:"2 single beds (200√ó90 each) ¬∑ En-suite with shower",note:"Recommended for kids (smallest room)"}
];
const TASTING_BESPOKE=["Mon 12 Oct 2026 (lunch)","Tue 13 Oct 2026 (lunch)","Wed 14 Oct 2026 (lunch)","Thu 15 Oct 2026 (lunch)","Fri 16 Oct 2026 (lunch)","Mon 5 Apr 2027 (lunch)","Tue 6 Apr 2027 (lunch)","Wed 7 Apr 2027 (lunch)","Thu 8 Apr 2027 (lunch)","Fri 9 Apr 2027 (lunch)"];
const TASTING_EVENT=["Sat 17 Oct 2026 ‚Äî Ibicenco Zest","Sun 18 Oct 2026 ‚Äî Smoky Zest","Sat 10 Apr 2027 ‚Äî Ibicenco Zest","Sun 11 Apr 2027 ‚Äî Smoky Zest"];

// ===== CORE FUNCTIONS =====
let lastTab=tab;
function render(){
document.getElementById("hN").textContent=(D.p1&&D.p2)?(D.p1+" & "+D.p2):"Welcome";
document.getElementById("hD").textContent=D.dt||"";
let th="";ALL_TABS.forEach((t,i)=>{
th+=`<div class="tab${i===tab?" on":""}" onclick="tab=${i};render()">${t}</div>`;
});
document.getElementById("tabs").innerHTML=th;
const fns=[rOverviewTimeline,rVenueStay,rCatering,rVenueExtras,rTablePlanner,rBudget,rChecklist];
document.getElementById("app").innerHTML=fns[tab]();
if(tab!==lastTab){window.scrollTo({top:0,behavior:"smooth"});lastTab=tab;}
}
function ct(f,mn,mx){return`<div class="cnt"><button onclick="D.${f}=Math.max(${mn},D.${f}-1);render()">‚àí</button><span>${D[f]}</span><button onclick="D.${f}=Math.min(${mx},D.${f}+1);render()">+</button></div>`;}
function ckb(f,label,price,note){var on=D[f];var noteHtml=note?'<div class="nt">'+note+'</div>':'';var h='<div class="ck" onclick="D.'+f+'=!D.'+f+';render()">'+(on?'\u2611':'\u2610')+' <div style="flex:1"><div class="sb"><span style="font-size:13px">'+label+'</span><span style="color:#b8a88a;font-size:13px">'+price+'</span></div>'+noteHtml+'</div></div>';return h;}
function cd(f,v,c,b){var on=b?D[f]:D[f]===v;var click=b?"tb('"+f+"')":"sv('"+f+"','"+(v===D[f]?'':v)+"')";return '<div class="cd'+(on?' on':'')+'" onclick="'+click+'">'+c+'</div>';}
function sv(f,v){D[f]=v;render();}function tb(f){D[f]=!D[f];render();}
function chip(arr,f,v){const on=arr.includes(v);return`<span class="ch${on?" on":""}" onclick="toggleChip('${f}','${v.replace(/'/g,"\\'")}')">${v}</span>`;}
function toggleChip(f,v){if(D[f].includes(v))D[f]=D[f].filter(x=>x!==v);else D[f].push(v);render();}
function tc(f,v,mx){if(D[f].includes(v))D[f]=D[f].filter(x=>x!==v);else if(!mx||D[f].length<mx)D[f].push(v);render();}
function ch(o,f,mx,c){var h='<div class="chips">';o.forEach(function(v){var on=D[f].includes(v)?' on':'';var cls=c?' '+c:'';var sv=v.replace(/'/g,'');h+='<span class="ch'+on+cls+'" onclick="tc(\''+f+'\',\''+sv+'\','+mx+')">'+v+'</span>';});return h+'</div>';}
function setNum(f,v,mn,mx){const n=parseInt(v)||0;D[f]=Math.max(mn,Math.min(mx,n));render();}
function toggleCave(slot){const idx=CV.findIndex(c=>c[0]===slot);if(D.cave.includes(slot)){D.cave=D.cave.filter(c=>{const ci=CV.findIndex(v=>v[0]===c);return ci<idx;});}else{for(let i=0;i<=idx;i++){if(!D.cave.includes(CV[i][0]))D.cave.push(CV[i][0]);}};render();}
function getM(){
// Use wedding date first, then accomPeriod as fallback
const d=D.dt?D.dt.toLowerCase():"";
if(d){if(d.includes("apr"))return"apr";if(d.includes("may"))return"may";if(d.includes("jun"))return"jun";if(d.includes("jul"))return"jul";if(d.includes("aug"))return"aug";if(d.includes("sep"))return"sep";if(d.includes("oct"))return"oct";}
const dh=D.dhDate?D.dhDate.toLowerCase():"";
if(dh){if(dh.includes("apr"))return"apr";if(dh.includes("may"))return"may";if(dh.includes("jun"))return"jun";if(dh.includes("jul"))return"jul";if(dh.includes("aug"))return"aug";if(dh.includes("sep"))return"sep";if(dh.includes("oct"))return"oct";}
const s=D.accomPeriod?D.accomPeriod.toLowerCase():"";
if(s){if(s.includes("oct"))return"oct";if(s.includes("sep"))return"sep";if(s.includes("aug"))return"aug";if(s.includes("jul"))return"jul";if(s.includes("jun"))return"jun";if(s.includes("may"))return"may";if(s.includes("apr"))return"apr";}
return null;}
function getDHP(){const f=[...DH27,...DH28].find(x=>x.d===D.dhDate);return f?f.p:0;}
function addMin(ts,mins){const[t,ap]=ts.split(" ");let[h,m]=t.split(":").map(Number);if(ap==="PM"&&h!==12)h+=12;if(ap==="AM"&&h===12)h=0;let tot=h*60+m+mins;if(tot<0)tot+=1440;let h2=Math.floor(tot/60)%24;let m2=tot%60;const a2=h2>=12?"PM":"AM";if(h2>12)h2-=12;if(h2===0)h2=12;return`${h2}:${m2.toString().padStart(2,"0")} ${a2}`;}
function getBarEnd(){if(!D.bar)return"12:00 AM";if(D.extraH===0)return"12:00 AM";if(D.extraH===1)return"1:00 AM";return D.extraH+":00 AM";}
function getMenuInfo(){return MN_INFO[D.menu]||null;}


// ===== PROPOSAL: OVERVIEW =====
function rOverview(){
const mo=getM();const m=getMenuInfo();
let h=`<h2 class="sec">Your Wedding Overview</h2>
<div class="warm">Welcome to your Pa√Øssa wedding planner. This is where everything lives ‚Äî your proposal, your planning, your budget. Use the tabs to navigate.</div>
<div style="background:#fff;border:1px solid #e8dfc8;border-radius:12px;padding:16px;margin:14px 0">
<div class="sb" style="padding:8px 0;border-bottom:1px solid #f0ece4"><span style="font-weight:600">Couple</span><span>${D.p1} & ${D.p2}</span></div>
<div class="sb" style="padding:8px 0;border-bottom:1px solid #f0ece4"><span style="font-weight:600">Wedding Date</span><span>${D.dhDate||D.dt||"TBC"}</span></div>
<div class="sb" style="padding:8px 0;border-bottom:1px solid #f0ece4"><span style="font-weight:600">Type</span><span>${D.hireType==="accom"?"Wedding + Accommodation":"Day Hire"}</span></div>
<div class="sb" style="padding:8px 0;border-bottom:1px solid #f0ece4"><span style="font-weight:600">Guests</span><span>${D.adults} adults${D.kids?", "+D.kids+" kids":""}${D.babies?", "+D.babies+" babies":""}</span></div>

</div>`;
// Timeline on overview
if(mo&&TL[mo]){
const t=TL[mo];
const sunset=SUNSETS[mo];
// Calculate party hours: from sunset to midnight (or cave end)
const sunH=parseInt(t.sun.split(":")[0]);const sunAP=t.sun.includes("PM");
const sunMins=(sunAP&&sunH!==12?sunH+12:sunH)*60+parseInt(t.sun.split(":")[1]);
const midnightMins=24*60;
const partyMins=midnightMins-sunMins;
const partyHrs=Math.round(partyMins/30)/2;
const caveHrs=D.cave.length;
h+=`<h3 class="ms" style="margin-top:20px">Your Day at a Glance</h3>
<div style="background:#fff;border:1px solid #e8dfc8;border-radius:12px;padding:16px;margin:10px 0">
<div class="tl-item"><div class="tl-time">${D.extArr?addMin(t.arr,-30):t.arr}</div><div class="tl-what"><strong>Guest Arrival</strong><div class="tl-dur">${D.extArr?"60 min":"30 min"}</div></div></div>
<div class="tl-item"><div class="tl-time">${t.cer}</div><div class="tl-what"><strong>Ceremony</strong><div class="tl-dur">30 min</div></div></div>
<div class="tl-item"><div class="tl-time">${t.rec}</div><div class="tl-what"><strong>Canap√©s & Cocktails</strong><div class="tl-dur">${D.extRec?"2 hours":"1.5 hours"}</div></div></div>
<div class="tl-item"><div class="tl-time">${t.din}</div><div class="tl-what"><strong>Dinner</strong><div class="tl-dur">~2 hours</div></div></div>
<div class="tl-item"><div class="tl-time">${t.sp}</div><div class="tl-what"><strong>${D.noSpeeches?"":"Speeches ¬∑ "}Sunset Build-Up ‚òÄÔ∏è</strong><div class="tl-dur">Sunset at ${sunset}</div></div></div>
<div class="tl-item"><div class="tl-time">${t.sun}</div><div class="tl-what"><strong>Sunset Moment ¬∑ Party Starts</strong><div class="tl-dur">${partyHrs}h open bar until midnight</div></div></div>
'+(D.cave.length>0?'<div class="tl-item" style="border:none"><div class="tl-time">Midnight</div><div class="tl-what"><strong>The Cave ‚Äî After Party</strong><div class="tl-dur">${caveHrs} hour${caveHrs>1?"s":""} ¬∑ until ${D.cave[D.cave.length-1].split("‚Äì")[1]}</div></div></div>':'<div class="tl-item" style="border:none"><div class="tl-time">Midnight</div><div class="tl-what"><strong>Event ends</strong></div></div>')+'
</div>`;
h+=`<div style="background:#f5f0e8;border-radius:8px;padding:10px 14px;font-size:12px;color:#5a4e3a;margin:6px 0"><strong>Total open bar/party:</strong> ${partyHrs} hours${caveHrs>0?" + "+caveHrs+" hour"+(caveHrs>1?"s":"")+" in The Cave":""} = <strong>${partyHrs+caveHrs} hours</strong></div>`;
}
// Guide links
h+=`<h3 class="ms" style="margin-top:24px">Your Guides</h3>
<div style="background:#fff;border:1px solid #e8dfc8;border-radius:10px;padding:14px;margin:10px 0">
<div style="padding:8px 0;border-bottom:1px solid #f0ece4"><a href="https://www.canva.com/design/DAG-NVkr1V4/zNxWX360wXVpgOSxagX5ZQ/view?utm_content=DAG-NVkr1V4&utm_campaign=designshare&utm_medium=link2&utm_source=uniquelinks&utlId=h957175b7c8" target="_blank" style="color:#b8a88a;font-weight:600;text-decoration:none;font-size:14px">üìñ Planning Guide</a><div class="nt">Everything you need to plan your Pa√Øssa wedding</div></div>
<div style="padding:8px 0;border-bottom:1px solid #f0ece4"><a href="https://www.canva.com/design/DAHAdPVvMAY/LJZ1-pQQXQjdQ5Rek0Hpfg/view?utm_content=DAHAdPVvMAY&utm_campaign=designshare&utm_medium=link2&utm_source=uniquelinks&utlId=h019606a9ba" target="_blank" style="color:#b8a88a;font-weight:600;text-decoration:none;font-size:14px">üéµ Sound, Light & Entertainment Guide</a><div class="nt">Music rules, DJ setup, Cave sound, live instruments</div></div>
<div style="padding:8px 0"><a href="https://www.canva.com/design/DAHAqme5W20/oshTj3Q3_XWQ7wDEvxmfVg/view?utm_content=DAHAqme5W20&utm_campaign=designshare&utm_medium=link2&utm_source=uniquelinks&utlId=h399ac2b509" target="_blank" style="color:#b8a88a;font-weight:600;text-decoration:none;font-size:14px">üíç Recommended Suppliers</a><div class="nt">Planners, photographers, florists, DJs, celebrants & more</div></div>
</div>`;
return h;
}


// ===== PROPOSAL: VENUE =====
function rVenue(){
let h=`<h2 class="sec">Pa√Øssa d'en Bernat Hire</h2>
<div class="warm"><strong>Included with every Pa√Øssa wedding:</strong><br>‚Ä¢ Exclusive use of all event spaces 10AM‚Äìmidnight<br>‚Ä¢ Up to 10 round tables + up to 80 white Chiavari chairs<br>‚Ä¢ The Cave ‚Äî underground disco with Pioneer sound & lighting<br>‚Ä¢ All venue furniture (sofas, cushions, loungers)<br>‚Ä¢ Dedicated venue manager + full setup & cleaning<br>‚Ä¢ Self-Planning Guide + Couples Tasting Week invitation<br>‚Ä¢ Two guest toilets, maintained throughout</div>`;
if(D.hireType==="day"){h+=`<h3 class="ms">Your Date</h3>`;
if(__isAdmin){h+=`<p class="nt">Select the wedding date.</p><select onchange="D.dhDate=this.value;render()"><option value="">Select date...</option><optgroup label="2027">`;DH27.forEach(x=>{h+=`<option value="${x.d}"${D.dhDate===x.d?" selected":""}>${x.d} ‚Äî ‚Ç¨${x.p.toLocaleString()}${x.pr?" ‚òÖ Premium":""}</option>`;});h+=`</optgroup><optgroup label="2028">`;DH28.forEach(x=>{h+=`<option value="${x.d}"${D.dhDate===x.d?" selected":""}>${x.d} ‚Äî ‚Ç¨${x.p.toLocaleString()}${x.pr?" ‚òÖ Premium":""}</option>`;});h+=`</optgroup></select>`;}
if(D.dhDate){const dhp=getDHP();h+=`<div style="background:#fff;border:1px solid #e8dfc8;border-radius:10px;padding:14px;margin:10px 0"><div class="sb" style="font-size:15px;font-weight:600"><span>${D.dhDate}</span><span style="color:#b8a88a">‚Ç¨${dhp.toLocaleString()}</span></div></div>`;}}
if(D.hireType==="accom"){h+=`<h3 class="ms">Wedding Date Period</h3><p class="nt">Includes 3 nights exclusive villa + wedding.</p>`;
if(__isAdmin){h+=`<select onchange="D.accomPeriod=this.value;render()"><option value="">Select period...</option>`;AC.forEach(([l,p,x])=>{h+=`<option value="${l}"${D.accomPeriod===l?" selected":""}>${l.trim()} ‚Äî ‚Ç¨${p.toLocaleString()} / 3 nights</option>`;});h+=`</select>`;}
else if(D.accomPeriod){const a=AC.find(x=>x[0]===D.accomPeriod);h+=`<div style="background:#fff;border:1px solid #e8dfc8;border-radius:10px;padding:14px;margin:10px 0"><div class="sb" style="font-size:15px;font-weight:600"><span>${D.accomPeriod.trim()}</span><span style="color:#b8a88a">‚Ç¨${a?a[1].toLocaleString():""} / 3 nights</span></div></div>`;}
if(D.accomPeriod){const a=AC.find(x=>x[0]===D.accomPeriod);
h+=`<h3 class="ms">Extra Nights</h3>`;
h+=`<div style="background:#fff;border:1px solid #e8dfc8;border-radius:10px;padding:14px;margin:10px 0">`;
h+=`<div class="sb"><span style="font-weight:600">Current stay</span><span>${3+D.extraNights} nights</span></div>`;
if(D.extraNights>0)h+=`<div class="sb" style="margin-top:4px"><span style="font-size:12px;color:#8a7e6a">Extra nights</span><span style="font-size:12px;color:#b8a88a">${D.extraNights} √ó ‚Ç¨${a[2]} = ‚Ç¨${(D.extraNights*a[2]).toLocaleString()}</span></div>`;
h+=`</div>`;
if(D.extraNightRequested&&!D.extraNightApproved){
h+=`<div class="warn"><strong>Extra night requested</strong> ‚Äî we'll check availability and confirm within 24 hours.</div>`;
}else if(!D.extraNightApproved){
h+=`<div style="background:#fff;border:1px dashed #d4c5a9;border-radius:10px;padding:14px;margin:10px 0;text-align:center"><div style="font-size:13px;font-weight:600;color:#5a4e3a">Want to add extra nights?</div><div style="font-size:12px;color:#8a7e6a;margin:6px 0">Subject to availability. +1 night: ‚Ç¨${a[2]} ¬∑ +2 nights: ‚Ç¨${a[2]*2}</div><div style="font-size:12px;color:#8a7e6a;margin:4px 0">To confirm, email <a href="mailto:info@paissadenbernat.com?subject=Extra Night Request ‚Äî ${D.p1} %26 ${D.p2}&body=Hi Cris,%0A%0AWe would love to add extra nights to our stay.%0A%0AThanks!" style="color:#b8a88a">info@paissadenbernat.com</a></div></div>`;
}
h+=`<div class="nt" style="margin-top:6px">Confirmed extra nights (set by venue):</div>${ct("extraNights",0,4)}`;
h+=`<div class="incl"><strong>Accommodation perks:</strong><br>‚Ä¢ Complimentary overnight stay during Tasting Week<br>‚Ä¢ 15% discount on Cave extensions</div>`;
h+=`<h3 class="ms" style="margin-top:20px">Second Day Event</h3>`;
h+=cd("secondEvent",null,`<div class="sb"><strong>Add Second Event</strong><span style="color:#b8a88a">‚Ç¨2,500 (up to 40 guests)</span></div>`,true);
if(D.secondEvent){h+=`<label class="lbl">Guests</label><input type="number" value="${D.secondEventGuests}" onchange="setNum('secondEventGuests',this.value,1,80)" min="1" max="80" style="width:100px">`;}
}}
if(!D.hireType)h+=`<div class="warm">Choose Day Hire or Accommodation on the Overview tab first.</div>`;
return h;}


// ===== PROPOSAL: TIMELINE =====
function rTimeline(){const mo=getM();if(!mo||!TL[mo])return`<h2 class="sec">Your Timeline</h2><div class="warm">Select your date or wedding period first to see a recommended timeline.</div>`;
const t=TL[mo];const sunset=SUNSETS[mo];
const recDur=D.extRec?"2 hours":"1.5 hours";
const arrTime=D.extArr?addMin(t.arr,-30):t.arr;
// Party hours calc
const sunMomentH=parseInt(t.sun.split(":")[0]);const sunMomentM=parseInt(t.sun.split(":")[1]);
const sunMomentMins=((t.sun.includes("PM")&&sunMomentH!==12)?sunMomentH+12:sunMomentH)*60+sunMomentM;
const partyMins=24*60-sunMomentMins;
const partyHrs=Math.round(partyMins/30)/2;
let h=`<h2 class="sec">Your Timeline</h2><div class="warm">A <strong>${t.lbl}</strong> wedding at Pa√Øssa, built around the sunset at <strong>${sunset}</strong>. Guests should be on their feet for the sunset moment by <strong>${t.sun}</strong>.<br><br><em>This can all be adjusted later.</em></div>`;
h+=`<div style="background:#fff;border:1px solid #e8dfc8;border-radius:12px;padding:16px;margin:16px 0">`;
h+=`<div class="tl-item"><div class="tl-time">${arrTime}</div><div><div class="tl-what"><strong>Guest Arrival & Welcome Drink</strong></div><div class="tl-dur">${D.extArr?"60 min":"30 min"}</div></div></div>`;
h+=`<div class="tl-item"><div class="tl-time">${t.cer}</div><div><div class="tl-what"><strong>Ceremony</strong></div><div class="tl-dur">30 min</div></div></div>`;
h+=`<div class="tl-item"><div class="tl-time">${t.rec}</div><div><div class="tl-what"><strong>Canap√©s & Cocktail Reception</strong></div><div class="tl-dur">${recDur}</div></div></div>`;
h+=`<div class="tl-item"><div class="tl-time">${t.din}</div><div><div class="tl-what"><strong>Dinner Service</strong></div><div class="tl-dur">~2 hours ‚Äî confirmed by Zest</div></div></div>`;
if(!D.noSpeeches)h+=`<div class="tl-item"><div class="tl-time">${t.sp}</div><div><div class="tl-what"><strong>Speeches & Toasts</strong></div><div class="tl-dur">~30 min</div></div></div>`;
h+=`<div class="tl-item"><div class="tl-time">${t.sun}</div><div><div class="tl-what"><strong>Sunset Moment ‚òÄÔ∏è</strong></div><div class="tl-dur">${t.sunBefore} min before sunset at ${sunset} ‚Äî guests on their feet, drinks in hand</div></div></div>`;
h+=`<div class="tl-item"><div class="tl-time">After sunset</div><div><div class="tl-what"><strong>Party & Open Bar</strong></div><div class="tl-dur">${partyHrs} hours until midnight</div></div></div>`;
if(D.cave.length>0){const caveHrs=D.cave.length;h+=`<div class="tl-item" style="border:none"><div class="tl-time">Midnight</div><div><div class="tl-what"><strong>The Cave ‚Äî After Party</strong></div><div class="tl-dur">${caveHrs} hour${caveHrs>1?"s":""} ¬∑ until ${D.cave[D.cave.length-1].split("‚Äì")[1]}</div></div></div>`;}
else h+=`<div class="tl-item" style="border:none"><div class="tl-time">Midnight</div><div><div class="tl-what"><strong>Event ends</strong></div></div></div>`;
h+=`</div>`;
h+=`<div style="background:#f5f0e8;border-radius:8px;padding:10px 14px;font-size:12px;color:#5a4e3a;margin:8px 0"><strong>Total party/bar time:</strong> ${partyHrs} hours${D.cave.length>0?" + "+D.cave.length+" hour"+(D.cave.length>1?"s":"")+" Cave = <strong>"+(partyHrs+D.cave.length)+" hours total</strong>":""}</div>`;
h+=`<h3 class="ms" style="margin-top:20px">Customise</h3>`;
h+=`<div class="tl-ext${D.extArr?" on":""}" onclick="tb('extArr')"><span>${D.extArr?"‚úì ":""}Extend Welcome to 60 min</span></div>`;
h+=`<div class="tl-ext${D.extRec?" on":""}" onclick="tb('extRec')"><span>${D.extRec?"‚úì ":""}Extend Reception to 2 hours</span></div>`;
h+=`<div class="tl-ext${D.noSpeeches?" on":""}" onclick="tb('noSpeeches')"><span>${D.noSpeeches?"‚úì ":""}Remove Speeches</span></div>`;
h+=`<h3 class="ms" style="margin-top:28px">The Cave ‚Äî Beyond Midnight</h3><p class="nt">Underground disco. Pioneer sound, lighting & bar included.${D.hireType==="accom"?" <strong>15% discount.</strong>":""}</p>`;
CV.forEach(([l,p])=>{const on=D.cave.includes(l);h+=`<div class="ck" onclick="toggleCave('${l}')">${on?"‚òë":"‚òê"} <div style="font-size:13px">${l} ‚Äî <span style="color:#b8a88a">‚Ç¨${p}</span></div></div>`;});
return h;}


// ===== PROPOSAL: MENU SELECTION =====
function rMenuSelect(){const m=getMenuInfo();
let h=`<h2 class="sec">Dining Style & Menu</h2><p class="sub">1.5h canap√©s reception + 2h dinner. All by Zest.</p>`;
for(let k in MN_INFO){const mi=MN_INFO[k];const pop=(k==="sm"||k==="im");h+=cd("menu",k,`<div style="font-size:15px;font-weight:600">${mi.n}${pop?'<span class="pop">Popular</span>':""}</div><div style="font-size:13px;color:#b8a88a;margin:3px 0">from ‚Ç¨${mi.p}pp</div><div style="font-size:12px;color:#8a7e6a">${mi.d}</div>`);}
if(!m)return h;
const isSa=D.menu==="sa",isSm=D.menu==="sm",isIb=D.menu.startsWith("i");
h+=`<h3 class="ms">Canap√©s ‚Äî ${m.cN} included</h3><p class="nt">${D.canapes.length} selected${D.canapes.length>m.cN?" ¬∑ <strong>"+(D.canapes.length-m.cN)+" extra (charged separately ‚Äî check Zest brochure)</strong>":""}</p>`+ch(isSa?CA:isSm?CB:CS,"canapes",99);
if(isIb)h+=`<p class="nt" style="margin-top:8px">Premium (+‚Ç¨4.50pp):</p>`+ch(CP,"canapes",99,"pr");
if(isSm)h+=`<div class="incl">Smoky starters included: Bread & Aioli, Smoky Hummus, Charcuterie & Cheese, Bruschetta Sobrasada, Artichokes, Grilled Prawns, Buffalo Mozzarella & Peach, Watermelon & Feta</div>`;
else if(!isSa){const sh=m.sN>1;h+=`<h3 class="ms">Starters ‚Äî choose ${m.sN}</h3><p class="nt">${D.starters.length} selected</p>`+ch(sh?SS:SP,"starters",99);}
if(isSa){h+=`<h3 class="ms">Paella ‚Äî choose 2</h3>`+ch(PA,"paellas",99)+`<h3 class="ms">Salads ‚Äî choose 2</h3>`+ch(SLx,"salads",99);}
else{const md=isSm?Mb:(D.menu==="im"||D.menu==="ip")?Mp:Ms;h+=`<h3 class="ms">Mains</h3><p class="nt">Choose 1 from each. * = premium. Extra selections at additional cost.</p><p style="font-size:11px;font-weight:600;margin-top:6px">Sea:</p>`+ch(md.sea,"mainS",99)+`<p style="font-size:11px;font-weight:600;margin-top:5px">Farm:</p>`+ch(md.farm,"mainF",99)+`<p style="font-size:11px;font-weight:600;margin-top:5px">Veg:</p>`+ch(md.veg,"mainV",99);}
if(m.siN>0){h+=`<h3 class="ms">Sides ‚Äî included</h3><div class="incl">${(isSm?SB:SI).join(" ¬∑ ")}</div>`;}
h+=`<h3 class="ms">Dessert</h3>`;DE[m.dT].forEach(d=>{const[n,desc]=d.split("|");h+=cd("dessert",n,`<strong>${n}</strong><div style="font-size:12px;color:#8a7e6a">${desc}</div>`);});
h+=`<label class="lbl" style="margin-top:16px">Dietary Notes & Allergies</label><textarea onchange="D.dietNotes=this.value" placeholder="Any allergies, dietary requirements, or food preferences?">${D.dietNotes}</textarea>`;
return h;}


// ===== PROPOSAL: DRINKS =====
function rDrinks(){let h=`<h2 class="sec">Drinks & Bar</h2><div class="incl"><strong>Always included:</strong> Sommelier dinner wine service (‚Ç¨25pp). All glassware, bartenders, bar setup, ice & fruit.</div>`;
h+=`<h3 class="ms">Arrival (${D.extArr?"60 min":"30 min"})</h3>`;AR.forEach(d=>{h+=cd("arr",d.i,`<div class="sb"><strong>${d.n}</strong><span style="color:#b8a88a">‚Ç¨${d.p}pp</span></div>`);});
if(D.arr&&!D.extArr){const a=AR.find(x=>x.i===D.arr);h+='<div class="tl-ext" onclick="D.extArr=!D.extArr;render()"><span>+30 min Welcome Extension (60 min total) ‚Äî +‚Ç¨'+a.p+'pp</span></div>';}
if(D.arr&&D.extArr){const a=AR.find(x=>x.i===D.arr);h+='<div class="tl-ext on" onclick="D.extArr=!D.extArr;render()"><span>\u2713 +30 min Welcome Extension (60 min) ‚Äî +‚Ç¨'+a.p+'pp</span></div>';}
h+=`<label class="lbl">Arrival drink notes</label><textarea onchange="D.confArrivalNotes=this.value" placeholder="e.g. specific cava preference, non-alcoholic options...">${D.confArrivalNotes}</textarea>`;
h+=`<h3 class="ms">Reception (${D.extRec?"2 hours":"1.5 hours"})</h3>`;
RE.forEach(d=>{h+=cd("rec",d.i,`<div class="sb"><strong>${d.n}</strong><span style="color:#b8a88a">‚Ç¨${d.p}pp${D.extRec?" (+‚Ç¨"+d.x+"pp ext)":""}</span></div>`);});
if(D.rec&&!D.extRec){const r=RE.find(x=>x.i===D.rec);h+=cd("recExt",null,`<div class="sb"><span>+30 min extension (2h total)</span><span style="color:#b8a88a">+\u20ac${r.x}pp</span></div>`,true);}
if(D.rec&&D.extRec){const r=RE.find(x=>x.i===D.rec);h+='<div class="tl-ext on" onclick="D.extRec=false;render()"><span>\u2713 Reception extended to 2h (+\u20ac'+r.x+'pp)</span></div>';}
h+=`<label class="lbl">Reception drink notes</label><textarea onchange="D.confReceptionNotes=this.value" placeholder="e.g. signature cocktail ideas, mocktails...">${D.confReceptionNotes}</textarea>`;
h+=`<h3 class="ms">Dinner Wines</h3><p class="nt">‚Ç¨25pp included. Wine choices confirmed at your tasting.</p>`;
h+=`<label class="lbl">Wine notes</label><textarea onchange="D.confDinnerWineNotes=this.value" placeholder="e.g. prefer red heavy, specific grape varieties...">${D.confDinnerWineNotes}</textarea>`;
h+=`<h3 class="ms">Open Bar \u2014 The Party</h3><div class="incl"><strong>Classic spirits:</strong> Tanqueray, Stolichnaya, Jameson, El Jimador, Havana 7<br><strong>Premium upgrade:</strong> Hendrick\u2019s, Grey Goose, JW Black Label, Don Julio, Diplom\u00e1tico</div><p class="nt">3 hours included. Starts after dinner.</p>`;BA.forEach(d=>{h+=cd("bar",d.i,`<div class="sb"><strong>${d.n}</strong><span style="color:#b8a88a">‚Ç¨${d.p}pp</span></div>`);});
if(D.bar){const b=BA.find(x=>x.i===D.bar);h+=`<label class="lbl">Extra hours? (‚Ç¨${b.x}pp/hr)</label>${ct("extraH",0,4)}`;h+=`<div class="warm" style="font-size:12px"><strong>Bar runs until: ${getBarEnd()}</strong>${D.cave.length>0?" ‚Äî make sure your bar covers Cave hours!":""}</div>`;}
h+=`<label class="lbl">Bar notes</label><textarea onchange="D.confBarNotes=this.value" placeholder="e.g. specific spirits, brand preferences...">${D.confBarNotes}</textarea>`;
h+=`<h3 class="ms" style="margin-top:20px">Signature Experiences</h3>`;
h+=cd("sunset",null,`<div class="sb"><strong>His & Her Sunset Cocktails</strong><span style="color:#b8a88a">‚Ç¨25pp</span></div><div style="font-size:12px;color:#8a7e6a">Two bespoke cocktails, dedicated styled bar with mixologist. 1.5 hours golden hour.</div>`,true);
if(D.sunset){h+='<div style="padding-left:28px"><label class="lbl">His Cocktail</label><input value="'+(D.hisCocktail||'')+'" onchange="D.hisCocktail=this.value" placeholder="e.g. Old Fashioned, Negroni..."><label class="lbl">Hers Cocktail</label><input value="'+(D.hersCocktail||'')+'" onchange="D.hersCocktail=this.value" placeholder="e.g. Espresso Martini, Aperol Spritz..."></div>';}
h+=cd("shots",null,`<strong>Ceremony Shots</strong><div style="font-size:12px;color:#8a7e6a">Ice-cold shots during "I do's". Price TBC.</div>`,true);
return h;}


// ===== PROPOSAL: EXTRAS =====
function rExtras(){let h=`<h2 class="sec">Catering Extras</h2><p class="sub">All optional ‚Äî catered by Zest. Added to your catering invoice.</p>`;
h+=`<h3 class="ms">Wedding Morning Brunch</h3><p class="nt">‚Ç¨65pp. Min 6 people. A relaxed start to your big day.</p>`;
h+=cd("brunchWed",null,(D.brunchWed?"‚úì ":"")+"Add Wedding Morning Brunch",true);
if(D.brunchWed){h+=`<label class="lbl">How many?</label><input type="number" value="${D.brunchWedPax}" onchange="setNum('brunchWedPax',this.value,5,${D.adults})" min="5" max="${D.adults}" style="width:100px">`;}
if(D.hireType==="accom"){h+=`<h3 class="ms">Morning After Brunch</h3><p class="nt">‚Ç¨65pp. Min 8, max 15 guests.</p>`;
h+=cd("brunchAfter",null,(D.brunchAfter?"‚úì ":"")+"Add Morning After Brunch",true);
if(D.brunchAfter){h+=`<label class="lbl">How many? (8-15)</label><input type="number" value="${D.brunchAfterPax}" onchange="setNum('brunchAfterPax',this.value,8,15)" min="8" max="15" style="width:100px">`;}}
h+=`<h3 class="ms">Late Night Snacks ‚Äî ‚Ç¨20pp</h3>`;h+=cd("snacks",null,(D.snacks?"‚úì ":"")+"Add Late Night Snacks",true);
if(D.snacks){SX.forEach(s=>{h+=cd("snackType",s,s);});}
h+=`<h3 class="ms">Wedding Cake ‚Äî from ‚Ç¨10pp</h3>`;
h+=cd("cake",null,(D.cake?"‚úì ":"")+"Add Cake",true);
if(D.cake)h+=`<textarea style="margin-top:6px" onchange="D.cakeNotes=this.value" placeholder="Ideas? Flavour, style, tiers?">${D.cakeNotes}</textarea>`;
h+=`<h3 class="ms" style="margin-top:24px">The Market Table</h3>
<div class="warm" style="font-size:12px">A harvest-inspired welcome display ‚Äî overflowing crates of seasonal fruit, cascading vegetables, and Mediterranean abundance. Designed and arranged by Noemi from Zest. Everything is edible, beautiful, and sets the tone before a single plate hits the table.<br><br>
<strong>From ‚Ç¨600 flat fee.</strong> Includes sourcing, transport, setup and styling. For larger events, the price may be higher ‚Äî Noemi will discuss details based on your guest count and vision.</div>`;
h+=cd("marketTable",null,(D.marketTable?"‚úì ":"")+"Add The Market Table ‚Äî from ‚Ç¨600",true);
if(D.marketTable)h+=`<textarea style="margin-top:6px" onchange="D.marketTableNotes=this.value" placeholder="Ideas? Scale, style, what you'd like to see...">${D.marketTableNotes||""}</textarea>`;
return h;}

// ===== PLANNER: ACCOMMODATION =====
function rAccom(){
let h=`<h2 class="sec">Your Stay at Pa√Øssa</h2><p class="sub">5 bedrooms for up to 10 guests.</p>`;
h+=`<div style="background:#fff;border:1px solid #e8dfc8;border-radius:12px;padding:14px;margin:14px 0">
<div class="sb" style="padding:6px 0;border-bottom:1px solid #f0ece4"><span style="font-weight:600">Check-in</span><span>${D.checkIn} ‚Äî from 3:00 PM</span></div>
<div class="sb" style="padding:6px 0;border-bottom:1px solid #f0ece4"><span style="font-weight:600">Check-out</span><span>${D.checkOut} ‚Äî by 10:00 AM</span></div>
<div class="sb" style="padding:6px 0;border-bottom:1px solid #f0ece4"><span style="font-weight:600">Nights</span><span>${3+D.extraNights}</span></div>
<div class="sb" style="padding:6px 0"><span style="font-weight:600">Gate Code</span><span style="font-size:16px;font-weight:600;color:#b8a88a">${D.gateCode} + ENTER</span></div></div>`;
h+=`<div class="incl">This code is for entry and exit throughout your stay. Share only with staying guests.</div>`;
h+=`<h3 class="ms">Who's Staying?</h3>`;
h+=`<div class="row"><div class="half"><label class="lbl">Adults</label><input type="number" value="${D.stayAdults}" onchange="D.stayAdults=Math.max(0,parseInt(this.value)||0);render()" min="0" max="10" style="width:80px"></div>
<div class="half"><label class="lbl">Children</label><input type="number" value="${D.stayChildren}" onchange="D.stayChildren=Math.max(0,parseInt(this.value)||0);render()" min="0" max="10" style="width:80px"></div></div>`;
if(D.stayChildren>0)h+=`<label class="lbl">Ages of children</label><input value="${D.stayChildAges}" onchange="D.stayChildAges=this.value" placeholder="e.g. 3, 6, 9">`;
h+=`<label class="lbl">Cots required</label>${ct("cotsNeeded",0,4)}`;
h+=`<label class="lbl">Kid fold-up beds (150√ó90)</label>${ct("kidBedsNeeded",0,4)}`;
h+=`<h3 class="ms" style="margin-top:20px">Room Allocation</h3>`;
ROOMS.forEach(r=>{h+=`<div class="room"><div class="room-title">${r.n}</div><div class="room-type">${r.t}</div>${noteDiv(r.note,"margin-bottom:6px")}<textarea onchange="D.${r.k}=this.value" placeholder="Guest names">${D[r.k]}</textarea></div>`;});
h+=`<h3 class="ms">Notes</h3><textarea onchange="D.roomNotes=this.value" placeholder="Special requests ‚Äî early check-in, grocery delivery, etc.">${D.roomNotes}</textarea>`;
return h;}


// ===== PLANNER: MORNING PREP =====
function rMorning(){
let h=`<h2 class="sec">Morning Prep</h2><p class="sub">Getting ready on your wedding day.</p>`;
h+=`<div class="prep-slot"><h3 class="ms" style="margin-top:0">Partner 1 ‚Äî at Pa√Øssa</h3>
<label class="lbl">Who's in the prep room?</label>
<textarea onchange="D.bridePeople=this.value" placeholder="e.g. Sarah, Mum, 3 bridesmaids, flower girl, HMU team">${D.bridePeople}</textarea>
<div class="row"><div class="half"><label class="lbl">Emergency Contact 1</label><input value="${D.brideContact1}" onchange="D.brideContact1=this.value" placeholder="Name + number"></div>
<div class="half"><label class="lbl">Emergency Contact 2</label><input value="${D.brideContact2}" onchange="D.brideContact2=this.value" placeholder="Name + number"></div></div>`;
if(D.hireType==="accom")h+=`<label class="lbl">What time can we prepare the prep room?</label><p class="nt">We need access before your day begins.</p><input value="${D.brideRoomPrepTime}" onchange="D.brideRoomPrepTime=this.value" placeholder="e.g. By 8AM ‚Äî we'll be in Room 3">`;
h+=`</div>`;
h+=`<div class="prep-slot"><h3 class="ms" style="margin-top:0">Groom / Partner 2</h3>
<label class="lbl">Getting ready where?</label><p class="nt">We suggest preparing at another location ‚Äî a hotel, a friend's villa in San Jos√©, etc.</p>
<input value="${D.groomLocation}" onchange="D.groomLocation=this.value" placeholder="e.g. Hotel, friend's villa">
<label class="lbl">Who's getting ready with them?</label>
<textarea onchange="D.groomPeople=this.value" placeholder="e.g. James, Best man, 2 groomsmen">${D.groomPeople}</textarea>
<div class="row"><div class="half"><label class="lbl">Emergency Contact 1</label><input value="${D.groomContact1}" onchange="D.groomContact1=this.value" placeholder="Name + number"></div>
<div class="half"><label class="lbl">Emergency Contact 2</label><input value="${D.groomContact2}" onchange="D.groomContact2=this.value" placeholder="Name + number"></div></div></div>`;
// Breakfast handled on Venue & Stay tab
h+=`<h3 class="ms">Special Requests</h3><textarea onchange="D.morningNeeds=this.value" placeholder="e.g. Cava for photos, garden access early, ice bucket...">${D.morningNeeds}</textarea>`;
return h;}


// ===== PLANNER: TASTING NOTES =====
function rTasting(){
const m=getMenuInfo();
let h=`<h2 class="sec">Tasting & Final Selections</h2>`;
h+=`<div class="warm"><strong>Tasting Dates 2026:</strong> Bespoke 12‚Äì16 Oct ¬∑ Ibicenco Event 17 Oct ¬∑ Smoky Event 18 Oct<br><strong>2027:</strong> Bespoke 5‚Äì9 Apr ¬∑ Ibicenco Event 10 Apr ¬∑ Smoky Event 11 Apr<br><br>Not sure if you qualify for bespoke? Ask Zest ‚Äî most couples attend the events.</div>`;
h+=`<h3 class="ms">Your Tasting</h3>`;
h+=`<div class="ck" onclick="D.tastingType=D.tastingType==='bespoke'?'':'bespoke';D.tastingDate='';render()">${D.tastingType==="bespoke"?"‚òë":"‚òê"} <span style="font-size:13px">Bespoke (check with Zest)</span></div>`;
h+=`<div class="ck" onclick="D.tastingType=D.tastingType==='event'?'':'event';D.tastingDate='';render()">${D.tastingType==="event"?"‚òë":"‚òê"} <span style="font-size:13px">Tasting Event</span></div>`;
if(D.tastingType){const dates=D.tastingType==="bespoke"?TASTING_BESPOKE:TASTING_EVENT;
h+=`<label class="lbl">Date</label><select onchange="D.tastingDate=this.value"><option value="">Select...</option>`;dates.forEach(d=>{h+=`<option value="${d}"${D.tastingDate===d?" selected":""}>${d}</option>`;});h+=`</select>`;
h+=`<label class="lbl">Name 1</label><input value="${D.tastingName1}" onchange="D.tastingName1=this.value" placeholder="Full name">`;
h+=`<label class="lbl">Name 2</label><input value="${D.tastingName2}" onchange="D.tastingName2=this.value" placeholder="Full name">`;
h+=`<label class="lbl">Allergies for the tasting</label><textarea onchange="D.tastingAllergies=this.value" placeholder="So the kitchen can prepare">${D.tastingAllergies}</textarea>`;}

if(!m)return h;
h+=`<h3 class="ms" style="margin-top:28px">Confirmed Menu ‚Äî Use on Tasting Day</h3>
<div class="warn">Record your final choices here during your tasting. Anything beyond the included number will be priced by Zest.</div>`;
// Uses same chip selectors as proposal but for confirmed choices
const isSa=D.menu==="sa",isSm=D.menu==="sm",isIb=D.menu.startsWith("i");
h+=`<h3 class="ms">Canap√©s ‚Äî ${m.cN} included</h3><p class="nt">${D.confCanapes.length} selected${D.confCanapes.length>m.cN?" ("+( D.confCanapes.length-m.cN)+" extra)":""}</p>`;
h+=`<div class="chips">`;(isSa?CA:isSm?CB:CS).forEach(c=>{h+=chip(D.confCanapes,"confCanapes",c);});h+=`</div>`;
if(isIb)h+=`<p class="nt" style="margin-top:6px">Premium (+‚Ç¨4.50pp):</p><div class="chips">`+CP.map(c=>chip(D.confCanapes,"confCanapes",c)).join("")+`</div>`;
h+=`<label class="lbl">Chef notes (canap√©s)</label><textarea onchange="D.chefNotesCanapes=this.value" placeholder="Notes for the kitchen">${D.chefNotesCanapes}</textarea>`;
if(isSm)h+=`<div class="incl">Smoky starters included: Bread & Aioli, Hummus, Charcuterie, Bruschetta, Artichokes, Prawns, Mozzarella & Peach, Watermelon & Feta</div>`;
else if(!isSa){h+=`<h3 class="ms">Starters ‚Äî ${m.sN} included</h3><p class="nt">${D.confStarters.length} selected</p><div class="chips">`;(m.sN>1?SS:SP).forEach(s=>{h+=chip(D.confStarters,"confStarters",s);});h+=`</div>`;
h+=`<label class="lbl">Chef notes (starters)</label><textarea onchange="D.chefNotesStarters=this.value" placeholder="Notes">${D.chefNotesStarters}</textarea>`;}
if(isSa){h+=`<h3 class="ms">Paella</h3><div class="chips">`;PA.forEach(p=>{h+=chip(D.confPaellas,"confPaellas",p);});h+=`</div>`;
h+=`<h3 class="ms">Salads</h3><div class="chips">`;SLx.forEach(s=>{h+=chip(D.confSalads,"confSalads",s);});h+=`</div>`;}
else if(m){const md=isSm?Mb:(D.menu==="im"||D.menu==="ip")?Mp:Ms;
h+=`<h3 class="ms">Mains</h3><p style="font-size:11px;font-weight:600;margin-top:6px">Sea:</p><div class="chips">`;md.sea.forEach(x=>{h+=chip(D.confMainS,"confMainS",x);});
h+=`</div><p style="font-size:11px;font-weight:600;margin-top:5px">Farm:</p><div class="chips">`;md.farm.forEach(x=>{h+=chip(D.confMainF,"confMainF",x);});
h+=`</div><p style="font-size:11px;font-weight:600;margin-top:5px">Veg:</p><div class="chips">`;md.veg.forEach(x=>{h+=chip(D.confMainV,"confMainV",x);});h+=`</div>`;
h+=`<label class="lbl">Chef notes (mains)</label><textarea onchange="D.chefNotesMain=this.value" placeholder="Notes">${D.chefNotesMain}</textarea>`;}
if(m.siN>0){h+=`<h3 class="ms">Sides</h3><div class="chips">`;(isSm?SB:SI).forEach(s=>{h+=chip(D.confSides,"confSides",s);});h+=`</div>`;}
h+=`<h3 class="ms">Dessert</h3>`;DE[m.dT].forEach(d=>{const[n]=d.split("|");h+=`<div class="ck" onclick="D.confDessert=D.confDessert==='${n}'?'':'${n}';render()">${D.confDessert===n?"‚òë":"‚òê"} <span style="font-size:13px">${n}</span></div>`;});
h+=`<label class="lbl">Chef notes (dessert)</label><textarea onchange="D.chefNotesDessert=this.value" placeholder="Notes">${D.chefNotesDessert}</textarea>`;
h+=`<h3 class="ms" style="margin-top:24px">Notes for Caterers</h3><textarea onchange="D.catererNotes=this.value" placeholder="General notes for Zest">${D.catererNotes}</textarea>`;
h+=`<h3 class="ms">Notes for Venue</h3><textarea onchange="D.venueNotes=this.value" placeholder="Notes for Cris and the Pa√Øssa team">${D.venueNotes}</textarea>`;
h+=`<h3 class="ms" style="margin-top:24px">Style & Aesthetics</h3><p class="nt">Share your colour theme and style so caterers can match your look.</p>`;
h+=`<label class="lbl">Colour Theme</label><input value="${D.colorTheme}" onchange="D.colorTheme=this.value" placeholder="e.g. Sage green & warm white">`;
h+=`<label class="lbl">Style Notes</label><textarea onchange="D.styleNotes=this.value" placeholder="e.g. Rustic Mediterranean, boho, minimalist...">${D.styleNotes}</textarea>`;
return h;}


// ===== PLANNER: LIGHTING & SOUND =====
function rLightSound(){
let h=`<h3 class="ms">SOUND, LIGHTING & D√âCOR</h3>
<div class="incl"><strong>Cave included:</strong> 4 moving head lights, disco balls, full Pioneer sound.</div>`;
h+=`<h3 class="ms">Sound</h3>`;
h+=ckb("sound","Portable Outdoor Sound System","\u20ac650","Covers both terraces \u2014 ceremony and dinner.");
h+=`<h3 class="ms" style="margin-top:16px">Lighting & D√©cor</h3>`;
h+=ckb("uplights","Dancefloor Uplights (6 units)","‚Ç¨450","Coloured uplights around dancefloor");
h+=ckb("festoons","Festoon or Fairylights","‚Ç¨1,200","Covered Porch or Pergola");
h+=ckb("discoBalls","Terrace Disco Balls","‚Ç¨850","One side of Covered Porch");
h+=ckb("fairyCurtains","Fairlight Curtains","‚Ç¨650","Entrance/Exit Walkway");
let lt=0;if(D.uplights)lt+=450;if(D.festoons)lt+=1200;if(D.discoBalls)lt+=850;if(D.fairyCurtains)lt+=650;
if(lt>0)h+=`<div style="text-align:right;margin-top:8px;font-size:13px;font-weight:600;color:#b8a88a">Lighting: ‚Ç¨${lt.toLocaleString()}</div>`;
h+=`<div class="warm" style="font-size:12px">Most couples with a DJ/band will have their own sound. This is for background music and speeches without a full DJ setup.</div>`;
h+=`<div class="warm" style="font-size:12px"><strong>The Cave</strong> has its own fixed sound system. Cannot be moved outdoors.</div>`;
return h;}


// ===== PLANNER: SETUP & FURNITURE =====
function rFurniture(){
const totalGuests=D.adults+D.kids;
const tablesIncl=Math.min(Math.ceil(totalGuests/10),10);
let h=`<h2 class="sec">Setup & Furniture</h2>`;
h+=`<h3 class="ms">DINING</h3>
<div class="incl"><strong>Included:</strong> Up to 10 round tables (8‚Äì10 per table) + up to 80 white Chiavari chairs.<br>${totalGuests} guests = <strong>${tablesIncl} round tables included</strong>.</div>`;
h+=`<h3 class="ms">Tables Required</h3><div class="nt">Based on ${totalGuests} guests. Min 9, max 10 per table. We have 10 round tables available.</div>`;
h+=`<div class="row"><div class="half"><label class="lbl">Round tables needed</label><input type="number" value="${D.tablesNeeded||tablesIncl}" onchange="D.tablesNeeded=Math.max(0,Math.min(10,parseInt(this.value)||0));render()" min="0" max="10" style="width:80px"></div></div>`;
h+=`<div style="background:#fff;border:1px dashed #d4c5a9;border-radius:10px;padding:14px;margin:10px 0;text-align:center"><div style="font-size:13px;font-weight:600;color:#5a4e3a">Ready to plan your seating?</div><div style="font-size:12px;color:#8a7e6a;margin:6px 0">Use Canva\u2019s free seating chart maker to drag and drop your guests onto tables.</div><a href="https://www.canva.com/create/wedding-seating-charts/" target="_blank" style="display:inline-block;margin-top:8px;padding:8px 20px;background:#b8a88a;color:#fff;border-radius:20px;text-decoration:none;font-size:12px">Open Canva Seating Chart</a></div>`;
h+=`<h3 class="ms">Presidential Table</h3><p class="nt">4m rectangular, seats 8 facing one side. Top table.</p>`;
h+=ckb("useRectTable","Add Presidential Table + Linen","‚Ç¨105","Table + tablecloth included");
h+=`<h3 class="ms">Chair Options</h3><p class="nt">Swap included white Chiavari for dining.</p>`;
h+=`<div class="ck" onclick="D.chairSwap=D.chairSwap==='lime'?'':'lime';render()">${D.chairSwap==="lime"?"‚òë":"‚òê"} <div style="flex:1"><div class="sb"><span style="font-size:13px">Limewash Chiavari</span><span style="color:#b8a88a">‚Ç¨6/chair</span></div><div class="nt">75 available</div></div></div>`;
h+=`<div class="ck" onclick="D.chairSwap=D.chairSwap==='cross'?'':'cross';render()">${D.chairSwap==="cross"?"‚òë":"‚òê"} <div style="flex:1"><div class="sb"><span style="font-size:13px">Rustic Crossback</span><span style="color:#b8a88a">‚Ç¨7/chair</span></div><div class="nt">62 available</div></div></div>`;
h+=`<h3 class="ms">Linens</h3>`;
h+=`<div class="ck"><div style="flex:1"><div class="sb"><span style="font-size:13px">Round Tablecloths</span><span style="color:#b8a88a">‚Ç¨55 each</span></div><div class="nt">Max: ${tablesIncl}</div><div style="margin-top:4px">${ct("roundCloths",0,tablesIncl)}</div></div></div>`;
h+=`<div class="ck" onclick="D.napkins=!D.napkins;render()">${D.napkins?"‚òë":"‚òê"} <div style="flex:1"><div class="sb"><span style="font-size:13px">Napkins (${D.adults} √ó ‚Ç¨2)</span><span style="color:#b8a88a">‚Ç¨${(D.adults*2).toLocaleString()}</span></div></div></div>`;
h+=`<h3 class="ms">Baby High Chairs</h3><p class="nt">4 available, free.</p>${ct("highChairs",0,4)}`;
h+=`<h3 class="ms" style="margin-top:28px">CEREMONY</h3><p class="nt">Ceremony furniture is at hire price, separate from dining.</p>`;
h+=`<div class="ck"><div style="flex:1"><div class="sb"><span style="font-size:13px">Wooden Benches (seats 5)</span><span style="color:#b8a88a">‚Ç¨30/bench</span></div><div class="nt">20 available</div><div style="margin-top:4px">${ct("cerBenches",0,20)}</div></div></div>`;
h+=`<label class="lbl">Ceremony Chairs</label>`;
h+=`<div class="ck" onclick="D.cerChairType=D.cerChairType==='white'?'':'white';render()">${D.cerChairType==="white"?"‚òë":"‚òê"} <div class="sb"><span style="font-size:13px">White Chiavari</span><span style="color:#b8a88a">‚Ç¨10</span></div></div>`;
h+=`<div class="ck" onclick="D.cerChairType=D.cerChairType==='limec'?'':'limec';render()">${D.cerChairType==="limec"?"‚òë":"‚òê"} <div class="sb"><span style="font-size:13px">Limewash</span><span style="color:#b8a88a">‚Ç¨10</span></div></div>`;
h+=`<div class="ck" onclick="D.cerChairType=D.cerChairType==='crossc'?'':'crossc';render()">${D.cerChairType==="crossc"?"‚òë":"‚òê"} <div class="sb"><span style="font-size:13px">Crossback</span><span style="color:#b8a88a">‚Ç¨11</span></div></div>`;
if(D.cerChairType)h+=`<label class="lbl">How many?</label><input type="number" value="${D.cerChairs}" onchange="D.cerChairs=Math.max(0,parseInt(this.value)||0);render()" min="0" max="130" style="width:80px">`;
h+=`<h3 class="ms">Partner Chairs</h3><p class="nt">Will you sit during ceremony? No charge ‚Äî just need to know.</p>`;
h+=`<div class="ck" onclick="D.brideGroomChairs=!D.brideGroomChairs;render()">${D.brideGroomChairs?"‚òë":"‚òê"} <span style="font-size:13px">Yes, 2 chairs</span></div>`;
if(D.brideGroomChairs){h+=`<div style="padding-left:28px">`;["white","lime","cross"].forEach(t=>{const l=t==="white"?"White Chiavari":t==="lime"?"Limewash":"Crossback";h+=`<div class="ck" onclick="D.bgChairType='${t}';render()">${D.bgChairType===t?"‚òë":"‚òê"} <span style="font-size:13px">${l}</span></div>`;});h+=`</div>`;}
h+=`<h3 class="ms" style="margin-top:20px">Anything Else?</h3><p class="nt">Space for a band, extra chair for special guest, etc.</p>
<textarea onchange="D.furnitureNotes=this.value" placeholder="Setup requests">${D.furnitureNotes}</textarea>`;
return h;}


// ===== PLANNER: SERVICES =====
function rServices(){
let h=`<h3 class="ms">SERVICES</h3><p class="nt">Useful if you don\u2019t have a day planner.</p><p class="sub">Coordination, styling, and support.</p>`;
h+=ckb("tableStyling","Table Styling & Setup (2 hours)","‚Ç¨100","Decorations, name tags, favours, menus, place cards");
h+=ckb("ceremonyStyle","Ceremony Styling","‚Ç¨150","Chairs, aisle, petals ‚Äî your materials, our labour");
h+=ckb("nightPack","Night Pack-Up & Go","‚Ç¨150","Pack prep room items, bouquet, table items. Great for day hires.");
h+=ckb("parkingAtt","Parking Attendant","‚Ç¨100","On-site 2 hours before. Organises all parking.");
h+=ckb("lateCoord","Late Night Coordinator","‚Ç¨250","10PM‚Äìmidnight. Coordinates final details.");
if(D.lateCoord)h+=`<div style="padding-left:28px"><div class="nt">Extra hours:</div>${ct("lateCoordExtra",0,4)}<div class="nt">+‚Ç¨100/hour = ‚Ç¨${(D.lateCoordExtra*100).toLocaleString()}</div></div>`;
h+=ckb("caveSecurity","Cave Security","‚Ç¨300","Required for all Cave extensions. Hours match your Cave booking.");
if(D.caveSecurity){var caveH=D.cave?D.cave.length:0;D.caveSecurityExtra=Math.max(0,caveH-1);h+=`<div style="padding-left:28px"><div class="nt">Security hours: ${1+D.caveSecurityExtra} (matches Cave booking)</div><div class="nt">Base: \u20ac300 + ${D.caveSecurityExtra} extra hours = \u20ac${300+D.caveSecurityExtra*100}</div></div>`;}
h+=`<h3 class="ms" style="margin-top:24px">Wedding Plant & Floral Styling</h3>
<div class="warm" style="font-size:12px">A hands-on, collaborative service. We visit the garden centre together (or via video call) and choose plants, pots, and greenery to style your ceremony, dinner, and party spaces. Think DIY with guidance.</div>`;
h+=ckb("gardenStyle","Wedding Plant Styling","‚Ç¨600 flat fee","+ pots and plants at market price");
if(D.gardenStyle){
h+=`<div class="warn"><strong>Please email info@paissadenbernat.com</strong> so we can put a garden centre visit in the diary. Ideally together in person ‚Äî if not, video call.</div>`;
h+=`<div style="padding-left:10px;margin-top:8px">
<div class="ck"><div style="flex:1"><div class="sb"><span>Small Pots</span><span style="color:#b8a88a">‚Ç¨20</span></div>${ct("gardenSmallPots",0,20)}</div></div>
<div class="ck"><div style="flex:1"><div class="sb"><span>Medium Pots</span><span style="color:#b8a88a">‚Ç¨30</span></div>${ct("gardenMedPots",0,20)}</div></div>
<div class="ck"><div style="flex:1"><div class="sb"><span>XL Pots</span><span style="color:#b8a88a">‚Ç¨100</span></div>${ct("gardenXLPots",0,10)}</div></div></div>`;
h+=`<label class="lbl">Plant & style ideas</label><textarea onchange="D.gardenPlantNotes=this.value" placeholder="Colours, types, style ‚Äî we'll source together">${D.gardenPlantNotes}</textarea>`;}
return h;}

// ===== CALCULATION HELPERS =====
function calcVenue(){const tg=D.adults+D.kids;let vh=0,eg=0;if(D.hireType==="day"&&D.dhDate){vh=getDHP();if(D.adults>80)eg=Math.min(D.adults-80,20)*120;}if(D.hireType==="accom"&&D.accomPeriod){const a=AC.find(x=>x[0]===D.accomPeriod);if(a)vh=a[1]+D.extraNights*a[2];if(D.adults>80)eg=Math.min(D.adults-80,50)*100;}let cv=0;D.cave.forEach(c=>{const x=CV.find(v=>v[0]===c);if(x)cv+=x[1];});if(D.hireType==="accom")cv=Math.round(cv*0.85);let se=0;if(D.secondEvent){se=2500;if(D.secondEventGuests>40)se+=(D.secondEventGuests-40)*50;}let li=0;if(D.uplights)li+=450;if(D.festoons)li+=1200;if(D.discoBalls)li+=850;if(D.fairyCurtains)li+=650;if(D.sound)li+=650;let fu=0;if(D.useRectTable)fu+=105;if(D.chairSwap==="lime")fu+=Math.min(tg,75)*6;if(D.chairSwap==="cross")fu+=Math.min(tg,62)*7;fu+=D.roundCloths*55;if(D.napkins)fu+=D.adults*2;fu+=D.cerBenches*30;const cp=D.cerChairType==="crossc"?11:10;if(D.cerChairType&&D.cerChairs)fu+=D.cerChairs*cp;let svc=0;if(D.tableStyling)svc+=100;if(D.ceremonyStyle)svc+=150;if(D.nightPack)svc+=150;if(D.parkingAtt)svc+=100;if(D.lateCoord)svc+=250+D.lateCoordExtra*100;if(D.caveSecurity)svc+=300+D.caveSecurityExtra*100;if(D.gardenStyle)svc+=600+D.gardenSmallPots*20+D.gardenMedPots*30+D.gardenXLPots*100;if(D.wantShopping)svc+=150;const ex=li+fu+svc;const hi=vh+eg+cv+se;return{vh,eg,cv,se,li,fu,svc,ex,hi,tot:hi+ex};}
function calcCat(){const m=getMenuInfo();const sN=m?Math.max(4,Math.ceil(D.adults/m.r)):0;const sC=sN*5*30;const sM=sN*45;const pc=D.canapes.filter(c=>c.includes("+\u20ac4.50")).length;const mc=m?m.p*D.adults+pc*4.5*D.adults:0;const kc=D.kids*45;const bwc=D.brunchWed?Math.max(D.brunchWedPax,6)*65:0;const bac=D.brunchAfter?Math.max(D.brunchAfterPax,8)*65:0;const sc=D.snacks?D.adults*20:0;const cc=D.cake?D.adults*10:0;const mtc=D.marketTable?600:0;const aP=((AR.find(x=>x.i===D.arr)||{p:0}).p)*(D.extArr?2:1);const rD=RE.find(x=>x.i===D.rec);const rP=rD?rD.p+((D.recExt||D.extRec)?rD.x:0):0;const bD=BA.find(x=>x.i===D.bar);const bP=bD?bD.p+bD.x*D.extraH:0;const dT=(aP+rP+25+bP+(D.sunset?25:0))*D.adults;const sub=mc+kc+sC+sM+bwc+bac+sc+cc+mtc+dT;const vat=sub*0.1;return{m,sN,sC,sM,pc,mc,kc,bwc,bac,sc,cc,mtc,aP,rP,bP,dT,sub,vat,tot:sub+vat};}

// ===== NEW COMBINED TAB FUNCTIONS =====

// TAB 1: Overview & Timeline
function rOverviewTimeline(){
const mo=getM();const m=getMenuInfo();
const autoID=(function(){const d=D.dt||D.dhDate||"";const mt=d.match(/(\d{1,2})\s+(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s+(\d{4})/i);if(!mt)return"";const ms={jan:"01",feb:"02",mar:"03",apr:"04",may:"05",jun:"06",jul:"07",aug:"08",sep:"09",oct:"10",nov:"11",dec:"12"};return mt[3].slice(2)+ms[mt[2].toLowerCase()]+mt[1].padStart(2,"0");})();
if(autoID&&!D.weddingID)D.weddingID=autoID;
let h=`<h2 class="sec">Your Master Planner</h2><div class="warm">Welcome to your Master Planner \u2014 everything for your Pa\u00efssa wedding lives here. Use the tabs above to navigate.</div>`;
h+=`<h3 class="ms">Personal Information</h3><div style="background:#fff;border:1px solid #e8dfc8;border-radius:12px;padding:16px;margin:14px 0">`;
h+=`<label class="lbl">Partner 1 \u2014 Full Name</label><input value="${D.p1}" onchange="D.p1=this.value;render()">`;
h+=`<label class="lbl">Partner 2 \u2014 Full Name</label><input value="${D.p2}" onchange="D.p2=this.value;render()">`;
h+=`<label class="lbl">Email</label><input value="${D.em}" onchange="D.em=this.value" placeholder="Email address">`;
h+=`<label class="lbl">Phone</label><input value="${D.ph}" onchange="D.ph=this.value" placeholder="Phone number">`;
h+=`<label class="lbl">Full Address (for billing)</label><textarea onchange="D.address=this.value" placeholder="Full billing address">${D.address}</textarea>`;
h+=`<label class="lbl">Passport / ID Number (Partner 1)</label><input value="${D.passport1}" onchange="D.passport1=this.value" placeholder="For contract and billing purposes">`;
h+=`<label class="lbl">Wedding Planner (if applicable)</label><input value="${D.plannerName}" onchange="D.plannerName=this.value" placeholder="Planner name">`;
h+=`<label class="lbl">Planner Email</label><input value="${D.plannerEmail}" onchange="D.plannerEmail=this.value" placeholder="Planner email">`;
h+=`</div>`;
h+=`<h3 class="ms">Event Details</h3><div style="background:#fff;border:1px solid #e8dfc8;border-radius:12px;padding:16px;margin:14px 0">`;
h+=`<div style="font-size:16px;font-weight:600;color:#b8a88a;margin-bottom:12px">Wedding of ${D.p1} & ${D.p2}</div>`;
if(__isAdmin){h+=`<label class="lbl">Wedding Date</label><input value="${D.dt}" onchange="D.dt=this.value;render()" placeholder="e.g. Sat 28 Aug 2027">`;}else{h+=`<label class="lbl">Wedding Date</label><input value="${D.dt}" readonly style="background:#f0ece4;cursor:default">`;}
h+=`<div class="row"><div class="half"><label class="lbl">Wedding ID</label><input value="${D.weddingID||autoID}" readonly style="font-weight:600;color:#b8a88a;background:#f0ece4;cursor:default"></div>`;
if(__isAdmin){h+=`<div class="half"><label class="lbl">Booking Type</label><select onchange="D.hireType=this.value;render()"><option value="accom"${D.hireType==="accom"?" selected":""}>Accommodation</option><option value="day"${D.hireType==="day"?" selected":""}>Day Hire</option></select></div></div>`;}else{h+=`<div class="half"><label class="lbl">Booking Type</label><input value="${D.hireType==="accom"?"Accommodation":"Day Hire"}" readonly style="background:#f0ece4;cursor:default"></div></div>`;}
h+=`<div class="sb" style="padding:8px 0;border-top:1px solid #f0ece4;margin-top:8px"><span style="font-weight:600">Days</span><span>${D.hireType==="day"?"1 day":((3+D.extraNights)+" nights")}</span></div>`;

h+=`</div>`;
h+=`<h3 class="ms">Guest Count</h3><div style="background:#fff;border:1px solid #e8dfc8;border-radius:12px;padding:16px;margin:14px 0">`;
h+=`<div class="nt" style="margin-bottom:8px">Set by venue at proposal stage:</div>`;
if(__isAdmin){h+=`<div class="row"><div class="half"><label class="lbl">Adults</label><input type="number" value="${D.proposalAdults}" onchange="D.proposalAdults=Math.max(1,parseInt(this.value)||0);render()" min="1" max="130" style="width:80px"></div>`;
h+=`<div class="half"><label class="lbl">Children (4-12)</label><input type="number" value="${D.proposalKids}" onchange="D.proposalKids=Math.max(0,parseInt(this.value)||0);render()" min="0" max="50" style="width:60px"></div></div>`;
h+=`<div class="row"><div class="half"><label class="lbl">Babies (0-3)</label><input type="number" value="${D.proposalBabies}" onchange="D.proposalBabies=Math.max(0,parseInt(this.value)||0);render()" min="0" max="20" style="width:60px"></div></div>`;}else{h+=`<div style="font-size:14px;padding:4px 0">${D.proposalAdults} Adults &middot; ${D.proposalKids} Children (4-12) &middot; ${D.proposalBabies} Babies (0-3)</div>`;}
h+=`<h3 class="ms" style="margin-top:16px">Updated Guest List</h3><div class="nt" style="margin-bottom:8px">Update your numbers as RSVPs come in:</div>`;
h+=`<div class="row"><div class="half"><label class="lbl">${D.adults} Adults</label><input type="number" value="${D.adults}" onchange="D.adults=Math.max(1,parseInt(this.value)||0);render()" min="1" max="130" style="width:80px"></div>`;
h+=`<div class="half"><label class="lbl">${D.kids} Children (4-12)</label><input type="number" value="${D.kids}" onchange="D.kids=Math.max(0,parseInt(this.value)||0);render()" min="0" max="50" style="width:60px"></div></div>`;
h+=`<div class="row"><div class="half"><label class="lbl">${D.babies} Babies (0-3)</label><input type="number" value="${D.babies}" onchange="D.babies=Math.max(0,parseInt(this.value)||0);render()" min="0" max="20" style="width:60px"></div></div>`;
const gc=(D.adults!==D.proposalAdults||D.kids!==D.proposalKids||D.babies!==D.proposalBabies);
if(gc)h+=`<div class="warn" style="margin-top:8px">Guest count updated from original proposal (${D.proposalAdults} adults${D.proposalKids?", "+D.proposalKids+" children":""}${D.proposalBabies?", "+D.proposalBabies+" babies":""}).</div>`;
h+=`</div>`;
h+=`<div style="background:#fff;border:1px solid #e8dfc8;border-radius:12px;padding:16px;margin:14px 0"><div class="sb" style="padding:8px 0;border-bottom:1px solid #f0ece4"><span style="font-weight:600">Wedding Date</span><span>${D.dhDate||D.dt||"TBC"}</span></div><div class="sb" style="padding:8px 0;border-bottom:1px solid #f0ece4"><span style="font-weight:600">Guests</span><span>${D.adults} adults${D.kids?", "+D.kids+" kids":""}${D.babies?", "+D.babies+" babies":""}</span></div></div>`;
if(mo&&TL[mo]){
const t=TL[mo];const sun=getExactSunset()||SUNSETS[mo];
const sH=parseInt(t.sun.split(":")[0]);const sAP=t.sun.includes("PM");
const sMin=(sAP&&sH!==12?sH+12:sH)*60+parseInt(t.sun.split(":")[1]);
const pMin=24*60-sMin;const pH=Math.round(pMin/30)/2;const cH=D.cave.length;const totP=pH+cH;
const isLate=(mo==="sep"||mo==="oct");
h+=`<h2 class="sec" style="margin-top:28px">Your Timeline</h2><div class="warm">A <strong>${t.lbl}</strong> wedding at Pa\u00efssa, built around the sunset at <strong>${sun}</strong>.${isLate?"<br><br><strong>Note:</strong> For September and October weddings, we recommend the sunset moment at least 40\u201345 minutes before sunset to make the most of the golden light.":"<br><br>We recommend the sunset moment around 30 minutes before sunset \u2014 but it can start whenever you like."}</div>`;
if(__isAdmin)h+=`<div class="ck" onclick="D.sunsetVerified=!D.sunsetVerified;render()">${D.sunsetVerified?"\u2611":"\u2610"} <span style="font-size:12px"><strong>Venue verified:</strong> sunset time checked for this date</span></div>`;
if(__isAdmin){h+=`<label class="lbl">Sunset notes from Cris</label><textarea onchange="D.sunsetNotes=this.value" placeholder="Personal note about sunset timing...">${D.sunsetNotes}</textarea>`;}else if(D.sunsetNotes){h+=`<div style="background:#fff;border:1px solid #e8dfc8;border-radius:10px;padding:14px;margin:10px 0;font-size:13px;line-height:1.6"><div style="font-size:11px;color:#b8a88a;font-weight:600;margin-bottom:6px">A note from Cris about your sunset</div>${D.sunsetNotes}</div>`;}
h+=`<div style="background:#fff;border:1px solid #e8dfc8;border-radius:12px;padding:16px;margin:16px 0">`;
h+=`<div class="tl-item"><div class="tl-time">${D.extArr?addMin(t.arr,-30):t.arr}</div><div class="tl-what"><strong>Guest Arrival & Welcome</strong><div class="tl-dur">${D.extArr?"60 min":"30 min"}</div></div></div>`;
h+=`<div class="tl-item"><div class="tl-time">${t.cer}</div><div class="tl-what"><strong>Ceremony</strong><div class="tl-dur">30 min</div></div></div>`;
h+=`<div class="tl-item"><div class="tl-time">${t.rec}</div><div class="tl-what"><strong>Canap\u00e9s & Cocktail Reception</strong><div class="tl-dur">${D.extRec?"2 hours":"1.5 hours"}</div></div></div>`;
h+=`<div class="tl-item"><div class="tl-time">${D.extRec?addMin(t.din,30):t.din}</div><div class="tl-what"><strong>Dinner Service</strong><div class="tl-dur">~2 hours</div></div></div>`;
if(!D.noSpeeches)h+=`<div class="tl-item"><div class="tl-time">${D.extRec?addMin(t.sp,30):t.sp}</div><div class="tl-what"><strong>Speeches & Toasts</strong><div class="tl-dur">~30 min</div></div></div>`;
h+=`<div class="tl-item"><div class="tl-time">${t.sun}</div><div class="tl-what"><strong>Sunset Moment \u2600\ufe0f</strong><div class="tl-dur">Sunset at ${sun}</div></div></div>`;
h+=`<div class="tl-item"><div class="tl-time">${t.sun}</div><div class="tl-what"><strong>Party & Open Bar</strong><div class="tl-dur">${pH} hours until midnight</div></div></div>`;
if(cH>0)h+=`<div class="tl-item" style="border:none"><div class="tl-time">Midnight</div><div class="tl-what"><strong>The Cave \u2014 After Party</strong><div class="tl-dur">${cH} hour${cH>1?"s":""}</div></div></div>`;
else h+=`<div class="tl-item" style="border:none"><div class="tl-time">Midnight</div><div class="tl-what"><strong>Event ends</strong></div></div>`;
h+=`</div>`;
h+=`<div style="background:#5a4e3a;color:#fff;border-radius:10px;padding:14px;margin:10px 0;text-align:center"><div style="font-size:12px;color:#d4c5a9;margin-bottom:4px">Total Party & Bar Time</div><div style="font-size:24px;font-weight:600">${totP} hours</div><div style="font-size:11px;color:rgba(255,255,255,.5);margin-top:4px">${pH}h open bar${cH>0?" + "+cH+"h Cave":""}</div></div>`;
h+=`<div class="warm" style="font-size:12px">Want to extend? Add Cave hours on the <strong>Venue & Stay</strong> tab.</div>`;
h+=`<h3 class="ms" style="margin-top:20px">Customise Your Timeline</h3>`;
h+=`<div class="tl-ext${D.extArr?" on":""}" onclick="tb('extArr')"><span>${D.extArr?"\u2713 ":""}Extend Welcome to 60 min</span></div>`;
h+=`<div class="tl-ext${D.extRec?" on":""}" onclick="tb('extRec')"><span>${D.extRec?"\u2713 ":""}Extend Reception to 2 hours</span></div>`;
h+=`<div class="tl-ext${D.noSpeeches?" on":""}" onclick="tb('noSpeeches')"><span>${D.noSpeeches?"\u2713 ":""}Remove Speeches</span></div>`;
}
h+=`<h3 class="ms" style="margin-top:24px">Your Guides</h3><div style="background:#fff;border:1px solid #e8dfc8;border-radius:10px;padding:14px;margin:10px 0"><div style="padding:8px 0;border-bottom:1px solid #f0ece4"><a href="https://www.canva.com/design/DAG-NVkr1V4/zNxWX360wXVpgOSxagX5ZQ/view" target="_blank" style="color:#b8a88a;font-weight:600;text-decoration:none;font-size:14px">\ud83d\udcd6 Planning Guide</a></div><div style="padding:8px 0;border-bottom:1px solid #f0ece4"><a href="https://www.canva.com/design/DAHAdPVvMAY/LJZ1-pQQXQjdQ5Rek0Hpfg/view" target="_blank" style="color:#b8a88a;font-weight:600;text-decoration:none;font-size:14px">\ud83c\udfb5 Sound, Light & Entertainment Guide</a></div><div style="padding:8px 0;border-bottom:1px solid #f0ece4"><a href="https://www.canva.com/design/DAHAqme5W20/oshTj3Q3_XWQ7wDEvxmfVg/view" target="_blank" style="color:#b8a88a;font-weight:600;text-decoration:none;font-size:14px">\ud83d\udc8d Recommended Suppliers</a></div><div style="padding:8px 0;border-bottom:1px solid #f0ece4"><a href="#" style="color:#b8a88a;font-weight:600;text-decoration:none;font-size:14px">\ud83c\udf34 Local\u2019s Guide to Ibiza \u2014 Coming Soon</a><div class="nt">Restaurants, beaches, hidden gems \u2014 by Cris</div></div><div style="padding:8px 0"><a href="#" style="color:#b8a88a;font-weight:600;text-decoration:none;font-size:14px">\ud83c\udf7d\ufe0f Your Catering Lookbook \u2014 Coming Soon</a><div class="nt">A visual guide to everything Zest \u2014 table settings, canap\u00e9s, dining styles & more</div></div></div>`;
h+=`<h3 class="ms" style="margin-top:24px">Contact Details</h3>`;
h+=`<div style="background:#fff;border:1px solid #e8dfc8;border-radius:12px;padding:16px;margin:10px 0"><div style="font-size:14px;font-weight:600;color:#b8a88a;margin-bottom:8px">Pa\u00efssa d\u2019en Bernat</div><div style="font-size:13px;padding:3px 0">Cris \u2014 <a href="tel:+34649920522" style="color:#3a3226">+34 649 920 522</a></div><div style="font-size:13px;padding:3px 0"><a href="mailto:info@paissadenbernat.com" style="color:#b8a88a">info@paissadenbernat.com</a></div><div style="font-size:12px;color:#8a7e6a;padding:3px 0;margin-top:4px">Emergencies only: Lynda \u2014 <a href="tel:+34649920527" style="color:#8a7e6a">+34 649 920 527</a></div></div>`;
h+=`<div style="background:#fff;border:1px solid #e8dfc8;border-radius:12px;padding:16px;margin:10px 0"><div style="font-size:14px;font-weight:600;color:#b8a88a;margin-bottom:8px">Zest Ibiza \u2014 Catering</div><div style="font-size:13px;padding:3px 0">Noemi \u2014 <a href="tel:+34661021700" style="color:#3a3226">+34 661 021 700</a></div><div style="font-size:13px;padding:3px 0"><a href="mailto:info@zestibiza.com" style="color:#b8a88a">info@zestibiza.com</a></div><div style="font-size:12px;color:#8a7e6a;padding:8px 0;margin-top:6px;border-top:1px solid #f0ece4">Management Team: Ben, Noemi & Luka<br><em>Any of the team may be in touch during your planning, tasting and site visits.</em></div></div>`;
return h;}

// TAB 2: Venue & Stay (combines venue + accom + morning prep)
function rVenueStay(){
let h='';
h+=`<div style="background:#fff;border:1px solid #e8dfc8;border-radius:12px;padding:14px;margin:0 0 14px 0"><div class="sb" style="padding:4px 0"><span style="font-weight:600">Wedding Date</span><span>${D.dt||"TBC"}</span></div><div class="sb" style="padding:4px 0"><span style="font-weight:600">Booking</span><span>${D.hireType==="accom"?"Accommodation":"Day Hire"}</span></div>${D.hireType==="accom"?'<div class="sb" style="padding:4px 0"><span style="font-weight:600">Check-in</span><span>'+(D.checkIn||"TBC")+'</span></div><div class="sb" style="padding:4px 0"><span style="font-weight:600">Check-out</span><span>'+(D.checkOut||"TBC")+'</span></div>':""}</div>`;
h+=rVenue(); // reuse existing venue function (has hire, cave, second event)
// Add logistics
h+=`<div class="section-divider">YOUR BOOKING</div>`;
h+=`<div style="background:#fff;border:1px solid #e8dfc8;border-radius:12px;padding:14px;margin:14px 0">`;
if(D.hireType==="accom"){
h+=`<div class="sb" style="padding:6px 0;border-bottom:1px solid #f0ece4"><span style="font-weight:600">Check-in</span><span>${D.checkIn} \u2014 from 3:00 PM</span></div><div class="nt" style="font-size:11px">Earlier check-in may be available. We can only confirm closer to the date \u2014 if we have clients checking out before you, an early arrival won\u2019t be possible.</div>`;
h+=`<div class="sb" style="padding:6px 0;border-bottom:1px solid #f0ece4"><span style="font-weight:600">Check-out</span><span>${D.checkOut} \u2014 by 10:00 AM</span></div>`;
h+=`<div class="sb" style="padding:6px 0;border-bottom:1px solid #f0ece4"><span style="font-weight:600">Nights</span><span>${3+D.extraNights}</span></div>`;
}else{
h+=`<div class="sb" style="padding:6px 0;border-bottom:1px solid #f0ece4"><span style="font-weight:600">Check-in</span><span>Wedding day \u2014 from 10:00 AM</span></div>`;
h+=`<div class="sb" style="padding:6px 0;border-bottom:1px solid #f0ece4"><span style="font-weight:600">Check-out</span><span>Wedding day \u2014 by midnight</span></div>`;
}
h+=`<div class="sb" style="padding:6px 0;border-bottom:1px solid #f0ece4"><span style="font-weight:600">Gate Code</span><span style="font-size:16px;font-weight:600;color:#b8a88a">${D.gateCode} + ENTER</span></div><div class="nt" style="font-size:11px">${D.hireType==="accom"?"Your code is DDMM (wedding date day + month)":"Your code is MMYY (wedding month + year)"}</div>`;
h+=`<div class="sb" style="padding:6px 0"><span style="font-weight:600">Location</span><span><a href="https://maps.app.goo.gl/CW7zEicaUhHVagfT6" target="_blank" style="color:#b8a88a">Open in Google Maps \u2197</a></span></div></div>`;
h+=`<div style="background:#fff;border:1px dashed #d4c5a9;border-radius:10px;padding:14px;margin:10px 0;text-align:center"><div style="font-size:13px;font-weight:600;color:#5a4e3a">Planning a visit?</div><a href="https://paissadenbernat.com/viewings" target="_blank" style="display:inline-block;margin-top:8px;padding:8px 20px;background:#b8a88a;color:#fff;border-radius:20px;text-decoration:none;font-size:12px">Book a Visit</a></div>`;
h+=`<div class="section-divider">PLANNING YOUR STAY</div>`;
h+=`<div style="background:#fff;border:1px solid #e8dfc8;border-radius:12px;padding:16px;margin:14px 0">`;
h+=`<div class="sb" style="padding:6px 0;border-bottom:1px solid #f0ece4"><span style="font-weight:600">WiFi</span><span>Alladins \u00b7 Password: <strong>alladins</strong></span></div>`;
h+=`<div class="sb" style="padding:6px 0"><span style="font-weight:600">Sound System</span><span>Sonos</span></div>`;
h+=`<div style="font-size:12px;color:#856404;background:#fff3cd;border-radius:6px;padding:8px 10px;margin-top:6px">Please download the <strong>Sonos app</strong> before your arrival.</div>`;
h+=`</div>`;
h+=`<div style="background:#fff;border:1px solid #e8dfc8;border-radius:10px;padding:14px;margin:10px 0"><a href="#" style="color:#b8a88a;font-weight:600;text-decoration:none;font-size:14px">\ud83c\udf34 Local\u2019s Guide to Ibiza \u2014 Coming Soon</a><div class="nt">Restaurants, beaches, hidden gems. Need help booking a table? Email us.</div></div>`;
// Accommodation (only for stays)
if(D.hireType==="accom"){h+=rAccom();}
// Morning prep
h+=rMorning();
// Breakfast note
h+=`<h3 class="ms">Breakfast</h3><p class="nt">Choose how you'd like to handle breakfast on the wedding morning.</p>`;
h+=`<div class="cd${D.breakfastOption==="caterers"?" on":""}" onclick="D.breakfastOption='caterers';D.brunchWed=true;D.wantShopping=false;render()"><strong>Caterers (Zest)</strong><div style="font-size:12px;color:#8a7e6a">Buffet breakfast prepared by Zest ‚Äî ‚Ç¨65pp. See Catering tab for details.</div></div>`;
h+=`<div class="cd${D.breakfastOption==="self"?" on":""}" onclick="D.breakfastOption='self';D.brunchWed=false;D.wantShopping=false;render()"><strong>Self-organised</strong><div style="font-size:12px;color:#8a7e6a">Bring your own ‚Äî the kitchen is yours.</div></div>`;
h+=`<div class="cd${D.breakfastOption==="shop"?" on":""}" onclick="D.breakfastOption='shop';D.brunchWed=false;D.wantShopping=true;render()"><strong>Shop for us ‚Äî ‚Ç¨150</strong><div style="font-size:12px;color:#8a7e6a">We shop for you. Up to 3 hours + shopping bill.</div></div>`;
if(D.breakfastOption==="caterers")h+=`<div class="incl">Wedding Morning Brunch confirmed on the Catering tab.</div>`;
if(D.breakfastOption==="shop"){h+=`<label class="lbl">Supermarket preference</label><p class="nt">All items need to come from one shop. We\u2019ll get meats from a quality butcher separately.</p><select onchange="D.shoppingStore=this.value;render()"><option value="">No preference</option><option value="Lidl"${D.shoppingStore==="Lidl"?" selected":""}>Lidl</option><option value="Aldi"${D.shoppingStore==="Aldi"?" selected":""}>Aldi</option><option value="Mercadona"${D.shoppingStore==="Mercadona"?" selected":""}>Mercadona</option><option value="HiperCenter"${D.shoppingStore==="HiperCenter"?" selected":""}>HiperCenter</option></select>`;
h+=`<label class="lbl">Shopping List</label><textarea onchange="D.shoppingList=this.value" placeholder="e.g. Prosecco, OJ, croissants, fruit, water...">${D.shoppingList}</textarea>`;}
return h;}

// TAB 3: Catering (combines menu + drinks + tasting + extras)
function rCatering(){
const m=getMenuInfo();const tg=D.adults+D.kids;
let h='';
h+=`<div style="background:#fff;border:1px solid #e8dfc8;border-radius:12px;padding:14px;margin:0 0 14px 0"><div class="sb" style="padding:4px 0"><span style="font-weight:600">Wedding Date</span><span>${D.dt||"TBC"}</span></div><div class="sb" style="padding:4px 0"><span style="font-weight:600">Menu</span><span>${m?m.n:"TBC"}</span></div><div class="sb" style="padding:4px 0"><span style="font-weight:600">Adults + Children</span><span>${D.adults} + ${D.kids} = ${tg}</span></div></div>`;
h+=rMenuSelect(); // menu selection + canapes + starters + mains + dessert
h+=`<div class="warm" style="font-size:12px;margin-top:16px">You can update all selections and add notes at the time of your tasting.</div>`;
h+=`<div class="section-divider">DRINKS & BAR</div>`;
h+=rDrinks(); // drinks
// Tasting RSVP only (not the full confirmed menu)
h+=`<div class="section-divider">TASTING</div>`;
h+=`<div class="warm">Your tasting is where everything comes together. Taste the menu, finalise your choices, and make any adjustments.</div>`;
h+=`<div style="background:#fff;border:1px dashed #d4c5a9;border-radius:10px;padding:14px;margin:10px 0;text-align:center"><div style="font-size:13px;font-weight:600;color:#5a4e3a">Ready to book your tasting?</div><a href="#" style="display:inline-block;margin-top:8px;padding:8px 20px;background:#b8a88a;color:#fff;border-radius:20px;text-decoration:none;font-size:12px">Book Tasting ‚Äî Coming Soon</a></div>`;
h+=`<div class="warm" style="font-size:12px"><strong>Tasting Dates 2026:</strong> Bespoke 12‚Äì16 Oct ¬∑ Ibicenco Event 17 Oct ¬∑ Smoky Event 18 Oct<br><strong>2027:</strong> Bespoke 5‚Äì9 Apr ¬∑ Ibicenco Event 10 Apr ¬∑ Smoky Event 11 Apr</div>`;
h+=`<h3 class="ms">RSVP</h3>`;
h+=`<div class="ck" onclick="D.tastingType=D.tastingType==='bespoke'?'':'bespoke';D.tastingDate='';render()">${D.tastingType==="bespoke"?"‚òë":"‚òê"} <span style="font-size:13px">Bespoke (check with Zest)</span></div>`;
h+=`<div class="ck" onclick="D.tastingType=D.tastingType==='event'?'':'event';D.tastingDate='';render()">${D.tastingType==="event"?"‚òë":"‚òê"} <span style="font-size:13px">Tasting Event</span></div>`;
if(D.tastingType){const dates=D.tastingType==="bespoke"?TASTING_BESPOKE:TASTING_EVENT;
h+=`<label class="lbl">Date</label><select onchange="D.tastingDate=this.value"><option value="">Select...</option>`;dates.forEach(d=>{h+=`<option value="${d}"${D.tastingDate===d?" selected":""}>${d}</option>`;});h+=`</select>`;
h+=`<label class="lbl">Name 1</label><input value="${D.tastingName1}" onchange="D.tastingName1=this.value" placeholder="Full name">`;
h+=`<label class="lbl">Name 2</label><input value="${D.tastingName2}" onchange="D.tastingName2=this.value" placeholder="Full name">`;
h+=`<label class="lbl">Allergies for the tasting</label><textarea onchange="D.tastingAllergies=this.value" placeholder="So the kitchen can prepare">${D.tastingAllergies}</textarea>`;}
h+=`<div class="section-divider">CATERING EXTRAS</div>`;
h+=rExtras();
h+=`<div class="section-divider">SECOND DAY EVENT</div>`;
if(D.secondEvent){
h+=`<div class="incl">Second day event confirmed for ${D.secondEventGuests} guests.</div>`;
h+=`<label class="lbl">Food package</label><textarea onchange="D.secondEventFood=this.value" placeholder="e.g. BBQ, paella, brunch \u2014 discuss with Zest">${D.secondEventFood}</textarea>`;
h+=`<label class="lbl">Drinks package</label><textarea onchange="D.secondEventDrinks=this.value" placeholder="e.g. Open bar, beer & wine only, BYOB...">${D.secondEventDrinks}</textarea>`;
}else{
h+=`<div class="warm" style="font-size:12px">Planning a second day event? Add it on the <strong>Venue & Stay</strong> tab first, then come back here to set up food and drinks.</div>`;
}
return h;}

// TAB 4: Venue Extras (combines furniture + lighting + services)
function rVenueExtras(){
let h=`<h2 class="sec">Venue Extras</h2><p class="sub">Cash only. All paid directly to the venue.</p>`;
h+=rFurniture();
h+=rLightSound();
h+=rServices();
h+=`<div class="section-divider">VENUE NOTES</div>`;
h+=`<textarea onchange="D.venueNotesAdmin=this.value" placeholder="Venue notes (set by Pa\u00efssa)..." style="min-height:80px">${D.venueNotesAdmin}</textarea>`;
return h;}


// ===== NEW BUDGET (v4) =====
function rBudget(){const v=calcVenue();const c=calcCat();const tg=D.adults+D.kids;
const vDP=D.venueDiscountOverride?D.venueDiscountCustom:D.venueDiscountPct;
const vDA=Math.round(v.hi*vDP/100);const vHD=v.hi-vDA;const vTD=vHD+v.ex;
const cDP=D.cateringDiscountOverride?D.cateringDiscountCustom:D.cateringDiscountPct;
const cDA=Math.round(c.sub*cDP/100);const cSD=c.sub-cDA;const cVt=cSD*0.1;const cTD=cSD+cVt;
let h=`<h2 class="sec">Budget</h2><p class="sub">Live totals. Venue and catering shown separately.</p>`;
// VENUE
h+=`<div class="sum"><div class="ti">Venue \u2014 Pa\u00efssa d\u2019en Bernat</div>`;
h+=`<div class="r" style="color:#d4c5a9;font-size:11px"><span>VENUE HIRE</span><span></span></div>`;
if(v.vh)h+=`<div class="r"><span>${D.hireType==="day"?"Day Hire":"Wedding + Accommodation"}</span><span>\u20ac${v.vh.toLocaleString()}</span></div>`;
if(v.eg)h+=`<div class="r"><span>Additional guests (over 80)</span><span>\u20ac${v.eg.toLocaleString()}</span></div>`;
if(v.cv)h+=`<div class="r"><span>Cave Extension${D.hireType==="accom"?" (15% off)":""}</span><span>\u20ac${v.cv.toLocaleString()}</span></div>`;
if(v.se)h+=`<div class="r"><span>Second Day Event</span><span>\u20ac${v.se.toLocaleString()}</span></div>`;
h+=`<div class="r" style="font-weight:600"><span>Venue Hire Subtotal</span><span>\u20ac${v.hi.toLocaleString()}</span></div>`;
if(v.ex>0){h+=`<div class="r" style="color:#d4c5a9;font-size:11px;margin-top:8px"><span>EXTRAS (cash only)</span><span></span></div>`;
if(D.uplights)h+=`<div class="r"><span>Uplights</span><span>\u20ac450</span></div>`;
if(D.festoons)h+=`<div class="r"><span>Festoons/Fairylights</span><span>\u20ac1,200</span></div>`;
if(D.discoBalls)h+=`<div class="r"><span>Disco Balls</span><span>\u20ac850</span></div>`;
if(D.fairyCurtains)h+=`<div class="r"><span>Fairy Curtains</span><span>\u20ac650</span></div>`;
if(D.sound)h+=`<div class="r"><span>Portable Sound</span><span>\u20ac650</span></div>`;
if(D.useRectTable)h+=`<div class="r"><span>Presidential Table</span><span>\u20ac105</span></div>`;
if(D.chairSwap)h+=`<div class="r"><span>Chair Swap</span><span>\u20ac${(Math.min(tg,D.chairSwap==="lime"?75:62)*(D.chairSwap==="lime"?6:7)).toLocaleString()}</span></div>`;
if(D.roundCloths)h+=`<div class="r"><span>Tablecloths (${D.roundCloths})</span><span>\u20ac${(D.roundCloths*55).toLocaleString()}</span></div>`;
if(D.napkins)h+=`<div class="r"><span>Napkins</span><span>\u20ac${(D.adults*2).toLocaleString()}</span></div>`;
if(D.cerBenches)h+=`<div class="r"><span>Benches (${D.cerBenches})</span><span>\u20ac${(D.cerBenches*30).toLocaleString()}</span></div>`;
const cp2=D.cerChairType==="crossc"?11:10;if(D.cerChairType&&D.cerChairs)h+=`<div class="r"><span>Ceremony Chairs (${D.cerChairs})</span><span>\u20ac${(D.cerChairs*cp2).toLocaleString()}</span></div>`;
if(D.tableStyling)h+=`<div class="r"><span>Table Styling</span><span>\u20ac100</span></div>`;
if(D.ceremonyStyle)h+=`<div class="r"><span>Ceremony Styling</span><span>\u20ac150</span></div>`;
if(D.nightPack)h+=`<div class="r"><span>Night Pack-Up</span><span>\u20ac150</span></div>`;
if(D.parkingAtt)h+=`<div class="r"><span>Parking</span><span>\u20ac100</span></div>`;
if(D.lateCoord)h+=`<div class="r"><span>Late Coordinator${D.lateCoordExtra?" +"+D.lateCoordExtra+"h":""}</span><span>\u20ac${(250+D.lateCoordExtra*100).toLocaleString()}</span></div>`;
if(D.caveSecurity)h+=`<div class="r"><span>Cave Security${D.caveSecurityExtra?" +"+D.caveSecurityExtra+"h":""}</span><span>\u20ac${(300+D.caveSecurityExtra*100).toLocaleString()}</span></div>`;
if(D.gardenStyle)h+=`<div class="r"><span>Plant Styling</span><span>\u20ac${(600+D.gardenSmallPots*20+D.gardenMedPots*30+D.gardenXLPots*100).toLocaleString()}</span></div>`;
if(D.wantShopping)h+=`<div class="r"><span>Shopping Service</span><span>\u20ac150</span></div>`;}
h+=`<div class="tot"><span>Venue Total</span><span>\u20ac${vTD.toLocaleString()}</span></div>`;
if(vDP>0)h+=`<div class="r" style="color:#4caf50;border:none"><span>Discount applied (${vDP}%${!D.venueDiscountOverride?" ‚Äî cash payment":""})</span><span>‚àí‚Ç¨${vDA.toLocaleString()}</span></div>`;
h+=`</div>`;
// Venue discount control
h+=`<div class="warm" style="font-size:12px">As per your contract, a <strong>${vDP}% courtesy discount</strong> is applied for cash payments. This is deducted from your final balance.</div>`;
h+=`<div class="nt" style="margin-top:4px">Venue discount % (set by venue): <input type="number" value="${D.venueDiscountOverride?D.venueDiscountCustom:D.venueDiscountPct}" onchange="D.venueDiscountOverride=true;D.venueDiscountCustom=Math.max(0,Math.min(100,parseInt(this.value)||0));render()" style="width:50px;padding:4px;font-size:11px;display:inline;border:1px solid #e8dfc8" min="0" max="100">%</div>`;
// Venue payments
h+=`<h3 class="ms">Venue Payments</h3>`;
D.venuePayments.forEach((p,i)=>{h+=`<div class="pay-row"><input type="number" value="${p.amount}" onchange="D.venuePayments[${i}].amount=this.value;render()" placeholder="\u20ac Amount" style="width:100px"><input value="${p.date}" onchange="D.venuePayments[${i}].date=this.value;render()" placeholder="Date" style="width:120px;flex:none"><input value="${p.note}" onchange="D.venuePayments[${i}].note=this.value" placeholder="Note" style="flex:1"></div>`;});
h+=`<div style="margin-top:6px"><span style="font-size:12px;color:#b8a88a;cursor:pointer;text-decoration:underline" onclick="D.venuePayments.push({amount:'',date:'',note:''});render()">+ Add payment</span></div>`;
const vP=D.venuePayments.reduce((s,p)=>s+(parseFloat(p.amount)||0),0);
h+=`<div style="margin-top:10px;padding:10px;background:#f5f0e8;border-radius:8px;font-size:13px"><div class="sb"><span>Total Paid</span><span>\u20ac${vP.toLocaleString()}</span></div><div class="sb" style="margin-top:4px;font-weight:600"><span>Balance Due</span><span>\u20ac${(vTD-vP).toLocaleString()}</span></div></div>`;

// Refundable deposit

h+=`<div style="background:#fff;border:1px solid #e8dfc8;border-radius:12px;padding:16px;margin:14px 0"><div style="font-size:14px;font-weight:600;color:#b8a88a;margin-bottom:10px">Venue Bank Details</div><div style="font-size:12px;line-height:1.8;color:#5a4e3a"><strong>Bank:</strong> Banco Santander, Figueretas, Ibiza 07800<br><strong>IBAN:</strong> ES60 0049 4577 9022 9000 4811<br><strong>SWIFT/BIC:</strong> BSCHESMMXXX<br><strong>Currency:</strong> EUR<br><strong>Reference:</strong> Please use your Wedding ID (<strong>${D.weddingID||"YYMMDD"}</strong>)<br><br><em>The client is liable for any currency conversion, bank fees or transfer charges.</em></div><div class="warm" style="font-size:11px;margin-top:10px">Payments can sometimes be taken in GBP \u2014 enquire with Cris if this would be helpful. This can save on conversion fees.</div></div>`;
h+=`<div style="background:#fff;border:1px solid #e8dfc8;border-radius:12px;padding:16px;margin:14px 0"><div style="font-size:14px;font-weight:600;color:#b8a88a;margin-bottom:10px">Catering Bank Details</div><div style="font-size:12px;color:#8a7e6a;font-style:italic">Details to be confirmed by Zest.</div></div>`;
h+=`<div class="section-divider">REFUNDABLE DAMAGE DEPOSIT</div>`;
h+=`<div class="warn"><strong>Refundable Deposit: \u20ac5,000</strong><br>Due before the event. Returned after the wedding subject to venue conditions.<br><em style="font-size:11px">Pa\u00efssa is not responsible for currency conversions or bank fees on deposit refunds.</em></div>`;
h+=`<h3 class="ms">Your Bank Details (for deposit refund)</h3><p class="nt">Please provide your international bank details so we can return your deposit after the wedding.</p>`;
h+=`<div style="background:#fff;border:1px solid #e8dfc8;border-radius:12px;padding:16px;margin:10px 0">`;
h+=`<label class="lbl">Account Holder Name</label><input value="${D.refundName||""}" onchange="D.refundName=this.value" placeholder="Full name on bank account">`;
h+=`<label class="lbl">IBAN</label><input value="${D.refundIBAN||""}" onchange="D.refundIBAN=this.value" placeholder="e.g. GB29 NWBK 6016 1331 9268 19">`;
h+=`<label class="lbl">SWIFT / BIC</label><input value="${D.refundBIC||""}" onchange="D.refundBIC=this.value" placeholder="e.g. NWBKGB2L">`;
h+=`<label class="lbl">Bank Name & Country</label><input value="${D.refundBank||""}" onchange="D.refundBank=this.value" placeholder="e.g. NatWest, United Kingdom">`;
h+=`<label class="lbl">Currency</label><input value="${D.refundCurrency||""}" onchange="D.refundCurrency=this.value" placeholder="e.g. EUR, GBP">`;
h+=`</div>`;
h+=`<label class="lbl">Account Name (for refund)</label><input value="${D.refundName}" onchange="D.refundName=this.value" placeholder="Full name on bank account">`;
h+=`<div class="row"><div class="half"><label class="lbl">IBAN</label><input value="${D.refundIBAN}" onchange="D.refundIBAN=this.value" placeholder="e.g. GB29 NWBK 6016 1331 9268 19"></div><div class="half"><label class="lbl">BIC/SWIFT</label><input value="${D.refundBIC}" onchange="D.refundBIC=this.value" placeholder="e.g. NWBKGB2L"></div></div>`;
// CATERING
h+=`<div class="sum" style="margin-top:30px"><div class="ti">Catering by Zest</div>`;
if(c.m)h+=`<div class="r"><span>${c.m.n} \u2014 ${D.adults}\u00d7\u20ac${c.m.p}</span><span>\u20ac${(c.m.p*D.adults).toLocaleString()}</span></div>`;
if(c.pc)h+=`<div class="r"><span>Premium canap\u00e9s (${c.pc})</span><span>\u20ac${Math.round(c.pc*4.5*D.adults).toLocaleString()}</span></div>`;
if(c.kc)h+=`<div class="r"><span>Kids menu \u2014 ${D.kids}\u00d7\u20ac45</span><span>\u20ac${c.kc.toLocaleString()}</span></div>`;
h+=`<div class="r"><span>Staff (${c.sN}\u00d75h\u00d7\u20ac30)</span><span>\u20ac${c.sC.toLocaleString()}</span></div>`;
h+=`<div class="r"><span>Staff meals (${c.sN}\u00d7\u20ac45)</span><span>\u20ac${c.sM.toLocaleString()}</span></div>`;
if(D.arr){const d=AR.find(x=>x.i===D.arr);h+=`<div class="r"><span>${d.n}</span><span>\u20ac${(d.p*D.adults).toLocaleString()}</span></div>`;}
if(D.rec){h+=`<div class="r"><span>Reception${(D.recExt||D.extRec)?" (2h)":""}</span><span>\u20ac${(c.rP*D.adults).toLocaleString()}</span></div>`;}
h+=`<div class="r"><span>Dinner Wines</span><span>\u20ac${(25*D.adults).toLocaleString()}</span></div>`;
if(D.bar){const bD=BA.find(x=>x.i===D.bar);h+=`<div class="r"><span>${bD.n}${D.extraH?" +"+D.extraH+"h":""}</span><span>\u20ac${(c.bP*D.adults).toLocaleString()}</span></div>`;}
if(D.sunset)h+=`<div class="r"><span>Sunset Cocktails</span><span>\u20ac${(25*D.adults).toLocaleString()}</span></div>`;
if(c.bwc)h+=`<div class="r"><span>Wedding Brunch (${D.brunchWedPax})</span><span>\u20ac${c.bwc.toLocaleString()}</span></div>`;
if(c.bac)h+=`<div class="r"><span>Morning After Brunch (${D.brunchAfterPax})</span><span>\u20ac${c.bac.toLocaleString()}</span></div>`;
if(c.sc)h+=`<div class="r"><span>Late Night Snacks</span><span>\u20ac${c.sc.toLocaleString()}</span></div>`;
if(c.cc)h+=`<div class="r"><span>Cake (from)</span><span>\u20ac${c.cc.toLocaleString()}</span></div>`;
if(c.mtc)h+=`<div class="r"><span>Market Table (from)</span><span>\u20ac${c.mtc.toLocaleString()}</span></div>`;
if(cDP>0)h+=`<div class="r" style="color:#4caf50"><span>Discount (${cDP}%)</span><span>\u2212\u20ac${cDA.toLocaleString()}</span></div>`;
h+=`<div class="r" style="color:#d4c5a9"><span>10% VAT</span><span>\u20ac${Math.round(cVt).toLocaleString()}</span></div>`;
h+=`<div class="tot"><span>Catering Total (incl. VAT)</span><span>\u20ac${Math.round(cTD).toLocaleString()}</span></div></div>`;
// Catering discount

// Catering payments
h+=`<h3 class="ms">Catering Payments</h3>`;
D.cateringPayments.forEach((p,i)=>{h+=`<div class="pay-row"><input type="number" value="${p.amount}" onchange="D.cateringPayments[${i}].amount=this.value;render()" placeholder="\u20ac Amount" style="width:100px"><input value="${p.date}" onchange="D.cateringPayments[${i}].date=this.value;render()" placeholder="Date" style="width:120px;flex:none"><input value="${p.note}" onchange="D.cateringPayments[${i}].note=this.value" placeholder="Note" style="flex:1"></div>`;});
h+=`<div style="margin-top:6px"><span style="font-size:12px;color:#b8a88a;cursor:pointer;text-decoration:underline" onclick="D.cateringPayments.push({amount:'',date:'',note:''});render()">+ Add payment</span></div>`;
const cP=D.cateringPayments.reduce((s,p)=>s+(parseFloat(p.amount)||0),0);
h+=`<div style="margin-top:10px;padding:10px;background:#f5f0e8;border-radius:8px;font-size:13px"><div class="sb"><span>Total Paid</span><span>\u20ac${cP.toLocaleString()}</span></div><div class="sb" style="margin-top:4px;font-weight:600"><span>Balance Due</span><span>\u20ac${(Math.round(cTD)-cP).toLocaleString()}</span></div></div>`;
// GRAND TOTAL
h+=`<div style="background:#5a4e3a;color:#fff;border-radius:12px;padding:20px;margin:24px 0"><div style="display:flex;justify-content:space-between;margin-bottom:12px"><div style="text-align:center;flex:1"><div style="font-size:11px;color:#d4c5a9">Venue</div><div style="font-size:20px;font-weight:600;margin:4px 0">\u20ac${vTD.toLocaleString()}</div><div style="font-size:10px;color:rgba(255,255,255,.5)">Paid to Pa\u00efssa</div></div><div style="text-align:center;flex:1"><div style="font-size:11px;color:#d4c5a9">Catering</div><div style="font-size:20px;font-weight:600;margin:4px 0">\u20ac${Math.round(cTD).toLocaleString()}</div><div style="font-size:10px;color:rgba(255,255,255,.5)">Paid to Zest</div></div></div><div style="text-align:center;border-top:1px solid rgba(255,255,255,.15);padding-top:12px"><div style="font-size:12px;color:#d4c5a9">Estimated Total</div><div style="font-size:28px;font-weight:600;margin:4px 0">\u20ac${Math.round(vTD+cTD).toLocaleString()}</div></div><div style="font-size:10px;color:rgba(255,255,255,.4);text-align:center;margin-top:6px">Garden plants at market price not included \u00b7 \u20ac5,000 refundable deposit not included</div></div>`;

return h;}

// ===== CHECKLIST (reuse original) =====
// ===== TABLE PLANNER =====
var tpSubTab=0;
var tpSelectedTable=null;
var tpZoomLevel=1;
var tpSeatPopupId=null;
const TP_MIN_GAP=12,TP_ROUND=22,TP_RECT_W=34,TP_RECT_H=16;
const TP_FP_IMG="data:image/jpeg;base64,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";

function rTablePlanner(){
var h='<h2 class="sec">Table Planner</h2>';
h+='<div class="sub">Drag tables onto your floor plan, add guests, and assign seats.</div>';
h+='<div class="tp-subtab"><div class="'+(tpSubTab===0?'on':'')+'" onclick="tpSubTab=0;render()">Floor Plan</div><div class="'+(tpSubTab===1?'on':'')+'" onclick="tpSubTab=1;render()">Guest List</div><div class="'+(tpSubTab===2?'on':'')+'" onclick="tpSubTab=2;render()">Summary</div></div>';
if(tpSubTab===0)h+=rTPFloorPlan();
else if(tpSubTab===1)h+=rTPGuestList();
else h+=rTPSummary();
return h;
}

function rTPFloorPlan(){
var h='<div class="fp-toolbar">';
h+='<button class="fp-btn" onclick="tpAddTable(\'round\')">+ Round Table</button>';
h+='<button class="fp-btn" onclick="tpAddTable(\'rect\')">+ Rectangular</button>';
if(tpSelectedTable!==null)h+='<button class="fp-btn danger" onclick="tpRemoveSelected()">Remove Selected</button>';
h+='</div>';
h+='<div class="fp-zoom"><button onclick="tpZoomOut()">‚àí</button><span id="tpZoomLvl">'+Math.round(tpZoomLevel*100)+'%</span><button onclick="tpZoomIn()">+</button><button onclick="tpZoomReset()" style="font-size:11px;width:auto;padding:0 10px">Reset</button></div>';
h+='<div class="fp-wrapper" id="tpWrapper"><div class="fp-container" id="tpContainer" style="transform:scale('+tpZoomLevel+');transform-origin:0 0">';
h+='<img class="fp-bg" id="tpBg" src="'+TP_FP_IMG+'" alt="Pa√Øssa Floor Plan" onload="tpInitDrag()">';
h+='</div></div>';
h+='<div class="fp-info">'+D.tpTables.length+' table'+(D.tpTables.length!==1?'s':'')+' placed</div>';
h+='<div style="background:#fff;border:1px solid #e8dfc8;border-radius:10px;padding:12px;margin:12px 0;font-size:12px;line-height:1.6;color:#5a4e3a">';
h+='<div style="font-weight:600;margin-bottom:6px;color:#b8a88a">How to use</div>';
h+='<div style="color:#8a7e6a"><strong>1.</strong> Add tables using the buttons above.<br><strong>2.</strong> Drag each table to its position. Use +/‚àí to zoom.<br><strong>3.</strong> Tables turn <span style="color:#dc3545">red</span> if too close ‚Äî waiters need space.<br><strong>4.</strong> Tap a table to assign guests to numbered seats.<br><strong>5.</strong> Switch to <strong>Guest List</strong> to add guests with meal choices.<br><strong>6.</strong> Switch to <strong>Summary</strong> to review and download.</div></div>';
var totalSeats=D.tpTables.reduce(function(s,t){return s+t.seats;},0);
var assigned=D.tpGuests.filter(function(g){return g.table;}).length;
if(D.tpTables.length>0){
h+='<div class="count-bar"><div><div class="c-num">'+totalSeats+'</div><div class="c-lbl">Total Seats</div></div><div><div class="c-num">'+assigned+'</div><div class="c-lbl">Assigned</div></div><div><div class="c-num">'+(D.tpGuests.length-assigned)+'</div><div class="c-lbl">Unassigned</div></div></div>';
}
return h;
}

function tpInitDrag(){
var container=document.getElementById('tpContainer');
if(!container)return;
container.querySelectorAll('.fp-table').forEach(function(el){el.remove();});
D.tpTables.forEach(function(t){
var el=document.createElement('div');
el.className='fp-table'+(t.type==='rect'?' rect':'');
el.style.left=t.x+'px';el.style.top=t.y+'px';
el.style.width=t.w+'px';el.style.height=t.h+'px';
el.dataset.id=t.id;
if(t.id===tpSelectedTable)el.style.borderColor='#5a4e3a';
var asgn=D.tpGuests.filter(function(g){return g.table===t.id;}).length;
el.innerHTML=t.label+'<div class="seats">'+asgn+'/'+t.seats+'</div>';
if(tpCheckSpacing(t))el.classList.add('warning');
var startX,startY,origX,origY,isDragging=false;
var onStart=function(ex,ey){isDragging=false;startX=ex;startY=ey;origX=t.x;origY=t.y;el.classList.add('dragging');};
var onMove=function(ex,ey){
var dx=ex-startX,dy=ey-startY;
if(Math.abs(dx)>3||Math.abs(dy)>3)isDragging=true;
var bg=document.getElementById('tpBg');
t.x=Math.max(0,Math.min(bg.clientWidth-t.w,origX+dx/tpZoomLevel));
t.y=Math.max(0,Math.min(bg.clientHeight-t.h,origY+dy/tpZoomLevel));
el.style.left=t.x+'px';el.style.top=t.y+'px';
if(tpCheckSpacing(t))el.classList.add('warning');else el.classList.remove('warning');
};
var onEnd=function(){
el.classList.remove('dragging');
if(!isDragging){tpSelectTable(t.id);}
tpInitDrag();
};
el.addEventListener('mousedown',function(e){e.preventDefault();onStart(e.clientX,e.clientY);
var mm=function(ev){onMove(ev.clientX,ev.clientY);};
var mu=function(){document.removeEventListener('mousemove',mm);document.removeEventListener('mouseup',mu);onEnd();};
document.addEventListener('mousemove',mm);document.addEventListener('mouseup',mu);});
el.addEventListener('touchstart',function(e){e.preventDefault();var tc=e.touches[0];onStart(tc.clientX,tc.clientY);
var tm=function(ev){ev.preventDefault();var tc2=ev.touches[0];onMove(tc2.clientX,tc2.clientY);};
var te=function(){document.removeEventListener('touchmove',tm);document.removeEventListener('touchend',te);onEnd();};
document.addEventListener('touchmove',tm,{passive:false});document.addEventListener('touchend',te);},{passive:false});
container.appendChild(el);
});
var bg=document.getElementById('tpBg');
var wrapper=document.getElementById('tpWrapper');
if(bg&&wrapper)wrapper.style.height=(bg.clientHeight*tpZoomLevel)+'px';
}

function tpCheckSpacing(tbl){
for(var i=0;i<D.tpTables.length;i++){
var other=D.tpTables[i];if(other.id===tbl.id)continue;
var dx=(tbl.x+tbl.w/2)-(other.x+other.w/2);
var dy=(tbl.y+tbl.h/2)-(other.y+other.h/2);
var dist=Math.sqrt(dx*dx+dy*dy);
var minDist=(tbl.w+other.w)/2+TP_MIN_GAP;
if(dist<minDist)return true;
}return false;
}

function tpAddTable(type){
var w=type==='round'?TP_ROUND:TP_RECT_W;
var h=type==='round'?TP_ROUND:TP_RECT_H;
var t={id:D.tpNextTableId++,type:type,x:150-w/2,y:100-h/2,w:w,h:h,seats:type==='round'?10:8,label:'T'+(D.tpTables.length+1)};
D.tpTables.push(t);render();
}
function tpRemoveSelected(){
if(tpSelectedTable===null)return;
D.tpGuests.forEach(function(g){if(g.table===tpSelectedTable)g.table=null;});
D.tpTables=D.tpTables.filter(function(t){return t.id!==tpSelectedTable;});
D.tpTables.forEach(function(t,i){t.label='T'+(i+1);});
tpSelectedTable=null;render();
}
function tpSelectTable(id){
tpSelectedTable=(tpSelectedTable===id)?null:id;
tpOpenSeatPopup(id);
}
function tpZoomIn(){tpZoomLevel=Math.min(3,tpZoomLevel+0.25);render();}
function tpZoomOut(){tpZoomLevel=Math.max(0.5,tpZoomLevel-0.25);render();}
function tpZoomReset(){tpZoomLevel=1;render();}

// Seat popup
function tpOpenSeatPopup(tableId){
tpSeatPopupId=tableId;
setTimeout(function(){tpRenderSeatPopup();},50);
}
function tpCloseSeatPopup(){
tpSeatPopupId=null;
var el=document.getElementById('tpSeatPopup');if(el)el.style.display='none';
}
function tpRenderSeatPopup(){
if(tpSeatPopupId===null)return;
var tbl=D.tpTables.find(function(t){return t.id===tpSeatPopupId;});
if(!tbl)return;
var existing=document.getElementById('tpSeatPopup');
if(!existing){existing=document.createElement('div');existing.id='tpSeatPopup';existing.className='seat-popup';existing.onclick=function(e){if(e.target===existing)tpCloseSeatPopup();};document.body.appendChild(existing);}
existing.style.display='flex';
var h='<div class="seat-card"><span class="close" onclick="tpCloseSeatPopup()">√ó</span>';
h+='<h3>'+tbl.label+' ‚Äî '+tbl.seats+' seats</h3>';
var unassigned=D.tpGuests.filter(function(g){return !g.table||g.table===tbl.id;});
for(var s=1;s<=tbl.seats;s++){
var seated=D.tpGuests.find(function(g){return g.table===tbl.id&&g.seatPos===s;});
h+='<div class="seat-row"><div class="seat-num">'+s+'</div>';
h+='<select onchange="tpAssignSeat('+tbl.id+','+s+',this.value)">';
h+='<option value="">‚Äî empty ‚Äî</option>';
D.tpGuests.forEach(function(g){
var sel=(g.table===tbl.id&&g.seatPos===s)?' selected':'';
if(!g.table||g.table===tbl.id)h+='<option value="'+g.id+'"'+sel+'>'+g.name+'</option>';
});
h+='</select></div>';
}
h+='</div>';
existing.innerHTML=h;
}
function tpAssignSeat(tableId,seatPos,guestIdStr){
var guestId=parseInt(guestIdStr);
// Clear anyone else in this seat
D.tpGuests.forEach(function(g){if(g.table===tableId&&g.seatPos===seatPos){g.table=null;g.seatPos=null;}});
if(guestId){var g=D.tpGuests.find(function(x){return x.id===guestId;});if(g){g.table=tableId;g.seatPos=seatPos;}}
tpRenderSeatPopup();
}

// Guest List
function rTPGuestList(){
var h='<div class="section-title" style="font-size:14px;font-weight:600;color:#5a4e3a;margin:0 0 8px;padding-bottom:4px;border-bottom:1px solid #e8dfc8">Add Guest</div>';
h+='<div class="gl-add"><input id="tpGName" placeholder="Guest name" onkeydown="if(event.key===\'Enter\')tpAddGuest()"><select id="tpGTable"><option value="">Table</option>';
D.tpTables.forEach(function(t){var cnt=D.tpGuests.filter(function(g){return g.table===t.id;}).length;h+='<option value="'+t.id+'">'+t.label+' ('+cnt+'/'+t.seats+')</option>';});
h+='</select><select id="tpGMeal"><option value="">Meal</option><option>Fish</option><option>Meat</option><option>Veggie</option><option>Vegan</option><option>Kids</option></select></div>';
h+='<div class="gl-add"><input id="tpGAllergy" placeholder="Allergies (optional)"><input id="tpGAge" placeholder="Child age" type="number" min="0" max="17" style="max-width:80px"><button onclick="tpAddGuest()">Add</button></div>';
h+='<div class="section-title" style="font-size:14px;font-weight:600;color:#5a4e3a;margin:16px 0 8px;padding-bottom:4px;border-bottom:1px solid #e8dfc8">Guests ('+D.tpGuests.length+')</div>';
D.tpGuests.forEach(function(g){
var tbl=D.tpTables.find(function(t){return t.id===g.table;});
h+='<div class="guest-card"><div><div class="g-name">'+g.name+(g.childAge!==null?' <span style="font-size:10px;color:#b8a88a">(age '+g.childAge+')</span>':'')+'</div>';
h+='<div class="g-info">'+(g.meal||'No meal set')+(g.allergy?' ¬∑ ‚ö†Ô∏è '+g.allergy:'')+'</div></div>';
h+='<select style="padding:4px;border:1px solid #e8dfc8;border-radius:6px;font-size:12px;font-family:Georgia,serif" onchange="tpAssignTable('+g.id+',this.value)">';
h+='<option value="">‚Äî</option>';
D.tpTables.forEach(function(t){var cnt=D.tpGuests.filter(function(x){return x.table===t.id;}).length;h+='<option value="'+t.id+'"'+(g.table===t.id?' selected':'')+'>'+t.label+' ('+cnt+'/'+t.seats+')</option>';});
h+='</select>';
h+='<div class="del" onclick="tpRemoveGuest('+g.id+')">√ó</div></div>';
});
return h;
}
function tpAddGuest(){
var nameEl=document.getElementById('tpGName');if(!nameEl||!nameEl.value.trim())return;
var tEl=document.getElementById('tpGTable'),mEl=document.getElementById('tpGMeal'),aEl=document.getElementById('tpGAllergy'),ageEl=document.getElementById('tpGAge');
var g={id:D.tpNextTableId++,name:nameEl.value.trim(),table:tEl.value?parseInt(tEl.value):null,meal:mEl.value||'',allergy:aEl.value||'',childAge:ageEl.value?parseInt(ageEl.value):null,seatPos:null};
D.tpGuests.push(g);render();
}
function tpRemoveGuest(id){D.tpGuests=D.tpGuests.filter(function(g){return g.id!==id;});render();}
function tpAssignTable(guestId,tableIdStr){
var g=D.tpGuests.find(function(x){return x.id===guestId;});
if(g){g.table=tableIdStr?parseInt(tableIdStr):null;if(!g.table)g.seatPos=null;}
render();
}

// Summary
function rTPSummary(){
var totalSeats=D.tpTables.reduce(function(s,t){return s+t.seats;},0);
var unseated=D.tpGuests.filter(function(g){return !g.table;}).length;
var h='<div class="count-bar"><div><div class="c-num">'+totalSeats+'</div><div class="c-lbl">Total Seats</div></div><div><div class="c-num">'+D.tpGuests.length+'</div><div class="c-lbl">Guests</div></div><div><div class="c-num">'+unseated+'</div><div class="c-lbl">Unseated</div></div></div>';
D.tpTables.forEach(function(t){
var tGuests=D.tpGuests.filter(function(g){return g.table===t.id;});
h+='<div style="font-size:14px;font-weight:600;color:#5a4e3a;margin:16px 0 8px;padding-bottom:4px;border-bottom:1px solid #e8dfc8">'+t.label+' ‚Äî '+tGuests.length+'/'+t.seats+' seats</div>';
if(!tGuests.length){h+='<div style="font-size:12px;color:#8a7e6a;padding:4px 0">No guests assigned</div>';return;}
h+='<table class="tp-summary-table"><tr><th>Seat</th><th>Name</th><th>Meal</th><th>Allergies</th><th>Age</th></tr>';
tGuests.sort(function(a,b){return(a.seatPos||99)-(b.seatPos||99);}).forEach(function(g){
h+='<tr><td>'+(g.seatPos||'‚Äî')+'</td><td>'+g.name+'</td><td>'+(g.meal||'‚Äî')+'</td><td>'+(g.allergy||'‚Äî')+'</td><td>'+(g.childAge!==null?g.childAge:'‚Äî')+'</td></tr>';
});
h+='</table>';
});
if(unseated){
var unGuests=D.tpGuests.filter(function(g){return !g.table;});
h+='<div style="font-size:14px;font-weight:600;color:#dc3545;margin:16px 0 8px;padding-bottom:4px;border-bottom:1px solid #e8dfc8">Unseated ‚Äî '+unseated+' guests</div>';
h+='<table class="tp-summary-table"><tr><th>Seat</th><th>Name</th><th>Meal</th><th>Allergies</th><th>Age</th></tr>';
unGuests.forEach(function(g){h+='<tr><td>‚Äî</td><td>'+g.name+'</td><td>'+(g.meal||'‚Äî')+'</td><td>'+(g.allergy||'‚Äî')+'</td><td>'+(g.childAge!==null?g.childAge:'‚Äî')+'</td></tr>';});
h+='</table>';
}
h+='<button class="tp-export-btn" onclick="tpExportCSV()">Download as CSV</button><div class="fp-info">Open the CSV in Excel or Google Sheets</div>';
return h;
}
function tpExportCSV(){
var csv='Table,Seat,Name,Meal Choice,Allergies,Child Age\n';
D.tpTables.forEach(function(t){
var tGuests=D.tpGuests.filter(function(g){return g.table===t.id;});
if(!tGuests.length){csv+=t.label+',,(empty),,,,\n';}
tGuests.forEach(function(g){csv+=t.label+','+(g.seatPos||'')+',\"'+g.name.replace(/"/g,'""')+'\",'+( g.meal||'')+','+(g.allergy||'')+','+(g.childAge!==null?g.childAge:'')+'\n';});
});
D.tpGuests.filter(function(g){return !g.table;}).forEach(function(g){csv+='UNSEATED,,"'+g.name.replace(/"/g,'""')+'",'+( g.meal||'')+','+(g.allergy||'')+','+(g.childAge!==null?g.childAge:'')+'\n';});
var blob=new Blob([csv],{type:'text/csv'});var a=document.createElement('a');a.href=URL.createObjectURL(blob);a.download='paissa-table-plan.csv';a.click();
}

function rChecklist(){

let h=`<h2 class="sec">Checklist ‚Äî 1 Month Before</h2>
<p class="sub">Everything to submit at least 1 month before your wedding.</p>
<div class="warm">Tick items as you complete them. The 1-month deadline is firm ‚Äî we need this time to prepare.</div>`;

h+=`<h3 class="ms">Submit to Zest (Caterers)</h3>`;
const cz=[["cl_menu","Final menu selections confirmed"],["cl_drinks","Final drinks package confirmed"],["cl_dietary","Dietary requirements & allergies submitted"],["cl_tasting","Tasting attended"],["cl_cake","Wedding cake confirmed (if applicable)"]];
cz.forEach(([k,l])=>{h+=`<div class="ck" onclick="D.${k}=!D.${k};render()">${D[k]?"‚òë":"‚òê"} <span style="font-size:13px">${l}</span></div>`;});

h+=`<h3 class="ms">Submit to Pa√Øssa (Venue)</h3>`;
const cv=[["cl_guestCount","Final guest count confirmed"],["cl_refund","Bank details for damage deposit refund submitted"],["cl_rooms","Room allocation confirmed"],["cl_tableplan","Table plan submitted"],["cl_floorplan","Floor plan / layout drawing submitted"],["cl_timeline","Timeline confirmed"],["cl_ceremony","Ceremony details (officiant, format, readings)"],["cl_license","Marriage license / paperwork sorted"],["cl_speeches","Speech order confirmed"],["cl_suppliers","Full supplier list with arrival times"],["cl_transport","Guest transport booked & pick-up points confirmed"],["cl_music","Music playlist / DJ brief submitted"],["cl_florist","Florist brief submitted"],["cl_furniture","Setup & furniture selections confirmed"],["cl_services","Venue services confirmed (styling, coordination, security)"],["cl_payments","Final venue payment made"]];
cv.forEach(([k,l])=>{h+=`<div class="ck" onclick="D.${k}=!D.${k};render()">${D[k]?"‚òë":"‚òê"} <span style="font-size:13px">${l}</span></div>`;});

const allC=[...cz,...cv];const done=allC.filter(([k])=>D[k]).length;
h+=`<div style="margin-top:16px;text-align:center;font-size:14px;color:#b8a88a;font-weight:600">${done}/${allC.length} completed</div>`;
if(done===allC.length)h+=`<div class="incl" style="text-align:center;font-size:14px;margin-top:8px">‚úì All done! You're ready for your wedding day.</div>`;
return h;}

// render(); moved to initPlanner

// render() moved to initPlanner



let __saveTimer=null,__slug="",__pin="",__isAdmin=false;
function autoSave(){clearTimeout(__saveTimer);__saveTimer=setTimeout(async function(){try{var headers={"Content-Type":"application/json"};var url,body;if(__isAdmin){headers["x-admin-token"]=__pin;url="/api/admin/weddings/"+__slug;body=JSON.stringify({data:D});}else{headers["x-pin"]=__pin;url="/api/weddings/"+__slug;body=JSON.stringify({data:D});}var res=await fetch(url,{method:"PUT",headers:headers,body:body});if(res.ok){var s=document.getElementById("saveStatus");if(s){s.textContent="Saved";s.style.opacity="1";setTimeout(function(){s.style.opacity="0";},1500);}}}catch(e){console.error(e);}},800);}
var __origRender2=render;render=function(){__origRender2();autoSave();setTimeout(function(){if(tab===4&&tpSubTab===0)tpInitDrag();},50);};
function showPinScreen(){document.getElementById("tabs").style.display="none";var el=document.getElementById("app");var h='<div style="max-width:360px;margin:60px auto;text-align:center">';h+='<div style="font-size:48px;margin-bottom:20px">&#128274;</div>';h+='<h2 style="font-family:Georgia,serif;color:#3a3226;margin-bottom:8px">Welcome</h2>';h+='<p style="color:#8a7e6a;font-size:14px;margin-bottom:24px">Enter your PIN to access your wedding planner.</p>';h+='<input id="pinInput" type="tel" maxlength="6" placeholder="PIN" style="width:200px;text-align:center;font-size:24px;letter-spacing:8px;padding:12px;border:2px solid #e8dfc8;border-radius:10px;font-family:Georgia,serif;color:#3a3226" onkeydown="if(event.key===&quot;Enter&quot;)submitPin()">';h+='<br><button onclick="submitPin()" style="margin-top:16px;padding:12px 40px;background:#b8a88a;color:#fff;border:none;border-radius:25px;font-size:14px;font-family:Georgia,serif;cursor:pointer">Enter</button>';h+='<div id="pinError" style="color:#c0392b;font-size:13px;margin-top:12px;display:none">Incorrect PIN</div>';h+='</div>';el.innerHTML=h;setTimeout(function(){var e=document.getElementById("pinInput");if(e)e.focus();},100);}

async function submitPin(){var pin=document.getElementById("pinInput").value;if(!pin)return;__slug=window.location.pathname.split("/").filter(Boolean).pop()||"";__pin=pin;try{var res=await fetch("/api/weddings/"+__slug,{headers:{"x-pin":pin}});if(res.ok){var w=await res.json();D=w.data||{};__isAdmin=false;initPlanner();return;}res=await fetch("/api/admin/weddings/"+__slug,{headers:{"x-admin-token":pin}});if(res.ok){var w=await res.json();D=w.data||{};__isAdmin=true;initPlanner();return;}document.getElementById('pinError').style.display='block';document.getElementById("pinInput").value="";}catch(e){console.error(e);}}
function initPlanner(){var m={};for(var k in DEFAULTS){m[k]=DEFAULTS[k];}for(var k in D){if(D[k]!==null&&D[k]!==undefined)m[k]=D[k];}D=m;document.getElementById("tabs").style.display="flex";render();}
document.addEventListener("DOMContentLoaded",function(){showPinScreen();});
</script></body></html>